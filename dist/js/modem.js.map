{"version":3,"sources":["modem.js","streamer.js","streamer/adapter.js","streamer/stream.js","streamer/waveform.js","streamer/adapter/flash.js","streamer/adapter/web-audio.js"],"names":["factory","define","amd","exports","require","_jquery","_streamer","_interopRequire","obj","__esModule","$","Streamer","fn","streamer","this","each","undefined","data","module","_streamerStream","_streamerWaveform","_prototypeProperties","child","staticProps","instanceProps","Object","defineProperties","prototype","_classCallCheck","instance","Constructor","TypeError","Stream","Waveform","element","options","_this","extend","defaults","classes","icons","audio","$audio","stream","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","$icon","icon","play","on","playing","pause","bind","removeClass","addClass","waveform","stroke","get","width","color","configurable","Adapter","loaded","progress","events","value","trigger","writable","update","event","callback","push","unbind","forEach","_streamerAdapterFlash","_streamerAdapterWebAudio","Flash","WebAudio","source","Audio","window","AudioContext","signal","canvas","ratio","draw","scale","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","height","w","h","r","lineWidth","strokeStyle","clearRect","beginPath","i","l","length","lineTo","closePath","_streamerAdapter","_get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","call","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","path","src","find","wave_L","wave_R","Float32Array","sampleSize","loadSoundManager","soundManager","createSound","url","autoLoad","whileplaying","whileloading","bytesLoaded","bytesTotal","onload","onplay","onresume","onpause","onfinish","soundManagerPath","js","swf","done","SM2_DEFER","ajax","dataType","cache","success","SoundManager","flashVersion","flash9Options","useWaveformData","preferFlash","useHTML5Audio","useHighPerformance","useFastPolling","multiShot","debugMode","debugFlash","beginDelayedInit","onready","sampleRate","waveformData","left","right","avg","j","parseFloat","createScriptProcessor","createJavascriptNode","processor","onaudioprocess","e","createGain","createGainNode","gain","readyState","oncanplay","connect","onprogress","target","currentTarget","duration","seekable","end","onplaying","buffers","channels","inputBuffer","numberOfChannels","resolution","sum","prev","curr","_i","getChannelData","_i2","reduce","createMediaElementSource","destination"],"mappings":"CAAA,SAAWA,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,SAAU,UAAW,SAAU,YAAaD,GACvB,mBAAZG,UAChBH,EAAQG,QAASC,QAAQ,UAAWA,QAAQ,cAE7C,SAAUD,EAASE,EAASC,GAC7B,YAEA,IAAIC,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GATlFE,EAACH,EAAAF,GACDM,EAAQJ,EAAAD,EAEfI,GAAEE,GAAGC,SAAW,WACd,MAAOC,MAAKC,KAAK,WACkBC,SAA7BN,EAAEO,KAAKH,KAAM,aACfJ,EAAEO,KAAKH,KAAM,WAAY,GAAIH,GAASG,UAK5CJ,EAAE,mBAAmBG,aAcrB,SAAWb,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,YAAa,UAAW,SAAU,SAAU,kBAAmB,qBAAsBD,GAChE,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,OAAQd,QAAQ,UAAWA,QAAQ,mBAAoBA,QAAQ,uBAEjF,SAAUD,EAASe,EAAQb,EAASc,EAAiBC,GACtD,YAEA,IAAIb,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GAEnFa,EAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhMI,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCCtClHrB,EAACH,EAAAF,GAED2B,EAAMzB,EAAAY,GACNc,EAAQ1B,EAAAa,GAKTT,EAAQ,WA8BA,QA9BRA,GA8BSuB,EAASC,GDsBlB,GAAIC,GAAQtB,IAEZc,GAAgBd,KCtDhBH,GA+BFG,KAAKqB,QAAUzB,EAAE2B,OAAOvB,KAAKwB,SAAUH,EAEvC,IAAII,GAAUzB,KAAKqB,QAAQI,QACvBC,EAAQ1B,KAAKqB,QAAQK,KAEzB1B,MAAK2B,MAAQP,EACbpB,KAAK4B,OAAShC,EAAEI,KAAK2B,OAErB3B,KAAK6B,OAAS,GAAIX,GAAOlB,KAAK2B,OAE9B3B,KAAK4B,OAAOE,KAAKlC,EAAE,WACjBmC,QAASN,EAAQO,WAGnBhC,KAAKiC,SAAWjC,KAAK4B,OAAOM,SAE5BlC,KAAKmC,QAAUvC,EAAE,cACjBI,KAAKiC,SAASG,OAAOpC,KAAKmC,SAE1BnC,KAAKqC,QAAUzC,EAAE,cACfmC,QAASN,EAAQa,OACjBC,KAAQ,WAEVvC,KAAKiC,SAASG,OAAOpC,KAAKqC,SAE1BrC,KAAKwC,MAAQ5C,EAAE,YACbmC,QAAO,GAAKN,EAAQgB,KAAI,IAAIhB,EAAQgB,KAAI,SAASf,EAAMgB,OAEzD1C,KAAKqC,QAAQD,OAAOpC,KAAKwC,OAEzBxC,KAAKqC,QAAQM,GAAG,QAAS,WACtBrB,EAAKO,OAAOe,QAAWtB,EAAKO,OAAOgB,QAAUvB,EAAKO,OAAOa,SAG5D1C,KAAK6B,OAAOiB,KAAK,OAAQ,WACvBxB,EAAKkB,MAAMO,YAAW,GAAItB,EAAQgB,KAAI,SAASf,EAAMgB,MACrDpB,EAAKkB,MAAMQ,SAAQ,GAAIvB,EAAQgB,KAAI,UAAUf,EAAMmB,OACnDvB,EAAKW,SAASe,SAAS,gBAGzBhD,KAAK6B,OAAOiB,KAAK,QAAS,WACxBxB,EAAKkB,MAAMO,YAAW,GAAItB,EAAQgB,KAAI,UAAUf,EAAMmB,OACtDvB,EAAKkB,MAAMQ,SAAQ,GAAIvB,EAAQgB,KAAI,SAASf,EAAMgB,MAClDpB,EAAKW,SAASc,YAAY,gBAG5B/C,KAAKiD,SAAW,GAAI9B,GAASnB,KAAKmC,QAAQ,GAAInC,KAAK6B,QACjDqB,OAAQlD,KAAKqB,QAAQ6B,SD0DvB,MA7BA3C,GC3GEV,EAAQ,MAMR2B,UD6GE2B,IC7GO,WACX,OACED,QACEE,MAAO,EACPC,MAAO,QAET5B,SACEO,QAAS,WACTM,OAAQ,kBACRG,KAAM,iBAERf,OACEgB,KAAM,WACNG,MAAO,eDiHPS,cAAc,KCpIhBzD,ID2IJO,GAAOf,QCxDMQ,ID0Df,SAAWX,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,oBAAqB,UAAW,UAAWD,GACtB,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,SAElB,SAAUf,EAASe,GACpB,YAEA,IAAIG,GAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhMI,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCE3JnHsC,EAAO,WACC,QADRA,KFqKAzC,EAAgBd,KErKhBuD,GAEFvD,KAAKwD,QAAS,EACdxD,KAAKyD,SAAW,EAChBzD,KAAK0D,UF6OL,MArEAnD,GE5KEgD,EAAO,MAOXb,MFuKMiB,MEvKD,WACC3D,KAAK4C,UAET5C,KAAK4C,SAAU,EACf5C,KAAK4D,QAAQ,QACb5D,KAAK2B,MAAMe,SFyKPmB,UAAU,EACVP,cAAc,GEvKpBT,OF0KMc,ME1KA,WACC3D,KAAK4C,UAEV5C,KAAK4C,SAAU,EACf5C,KAAK4D,QAAQ,SACb5D,KAAK2B,MAAMkB,UF4KPgB,UAAU,EACVP,cAAc,GE1KpBQ,QF6KMH,ME7KC,WACL3D,KAAK4D,QAAQ,WF+KTC,UAAU,EACVP,cAAc,GE7KpBR,MFgLMa,MEhLD,SAACI,EAAOC,GAOX,MANKhE,MAAK0D,OAAOK,KACf/D,KAAK0D,OAAOK,OAGd/D,KAAK0D,OAAOK,GAAOE,KAAKD,GAEjBhE,MFkLH6D,UAAU,EACVP,cAAc,GEhLpBY,QFmLMP,MEnLC,SAACI,GAKN,MAJI/D,MAAK0D,OAAOK,UACP/D,MAAK0D,OAAOK,GAGd/D,MFqLH6D,UAAU,EACVP,cAAc,GEnLpBM,SFsLMD,MEtLE,SAACI,GAKP,MAJI/D,MAAK0D,OAAOK,IACd/D,KAAK0D,OAAOK,GAAOI,QAAQ,SAACH,GFuLpB,MEvLiCA,OAGpChE,MF0LH6D,UAAU,EACVP,cAAc,KE7OhBC,IFoPJnD,GAAOf,QE9LMkE,IFgMf,SAAWrE,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,mBAAoB,UAAW,SAAU,yBAA0B,8BAA+BD,GAC7E,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,OAAQd,QAAQ,0BAA2BA,QAAQ,gCAErE,SAAUD,EAASe,EAAQgE,EAAuBC,GACnD,YAEA,IAAI5E,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GAEnFa,EAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhMI,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCGxQlHqD,EAAK7E,EAAA2E,GACLG,EAAQ9E,EAAA4E,GAKTnD,EAAM,WAyBE,QAzBRA,GAyBSsD,GH0PT1D,EAAgBd,KGnRhBkB,GA0BFlB,KAAK2B,MAAQ,GAAIT,GAAOqC,QAAQiB,GHkVhC,MApFAjE,GGxREW,GAWOqC,SH0RLJ,IG1Ra,WACH,GAAIsB,MAElB,OAAIC,QAAOC,aACFJ,EAGAD,GH4RLhB,cAAc,KG9QhBsB,QHuREzB,IGvRK,WACT,MAAOnD,MAAK2B,MAAMiD,QHyRdtB,cAAc,GGnRhBV,SH2REO,IG3RM,WACV,MAAOnD,MAAK2B,MAAMiB,SH6RdU,cAAc,GG1RpBZ,MH6RMiB,MG7RD,WACH3D,KAAK2B,MAAMe,QH+RPmB,UAAU,EACVP,cAAc,GG7RpBT,OHgSMc,MGhSA,WACJ3D,KAAK2B,MAAMkB,SHkSPgB,UAAU,EACVP,cAAc,GGhSpBR,MHmSMa,MGnSD,SAACI,EAAOC,GACXhE,KAAK2B,MAAMmB,KAAKiB,EAAOC,IHqSnBH,UAAU,EACVP,cAAc,GGnSpBY,QHsSMP,MGtSC,SAACI,GACN/D,KAAK2B,MAAMuC,OAAOH,IHwSdF,UAAU,EACVP,cAAc,GGtSpBM,SHySMD,MGzSE,SAACI,GACP/D,KAAK2B,MAAMiC,QAAQG,IH2SfF,UAAU,EACVP,cAAc,KGxWhBpC,IH+WJd,GAAOf,QG/SM6B,IHiTf,SAAWhC,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,qBAAsB,UAAW,SAAU,UAAWD,GACjC,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,OAAQd,QAAQ,YAElC,SAAUD,EAASe,EAAQb,GAC5B,YAEA,IAAIE,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GAEnFa,EAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhMI,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCIpYlHrB,EAACH,EAAAF,GAOF4B,EAAQ,WASA,QATRA,GASS0D,EAAQhD,EAAQR,GJyYzB,GAAIC,GAAQtB,IAEZc,GAAgBd,KIpZhBmB,EAUF,IAAI2D,GAAQ9E,KAAK8E,MAAMD,GACnBE,EAAO,WACLzD,EAAKyD,KAAKlD,EAAO+C,OAAQC,EAAQC,EAAOzD,IAE1C2D,EAAQ,WACN1D,EAAK0D,MAAMH,EAAQC,GACnBC,IAGNC,KACApF,EAAE8E,QAAQ/B,GAAG,SAAU,WJ6YnB,MI7YyBqC,OAC7BnD,EAAOiB,KAAK,SAAU,WJ+YlB,MI/YwBiC,OJse5B,MAnFAxE,GIxaEY,EAAQ,MA+BZ2D,OJoZMnB,MIpZA,SAACkB,GACL,GAAII,GAAUJ,EAAOK,WAAW,MAC5BC,EAAmBT,OAAOS,kBAAoB,EAC9CC,EAAoBH,EAAQI,8BACRJ,EAAQK,2BACRL,EAAQM,0BACRN,EAAQO,yBACRP,EAAQQ,wBAA0B,CAE1D,OAAON,GAAmBC,GJkZtBvB,UAAU,EACVP,cAAc,GI3YpB0B,OJqZMrB,MIrZA,SAACkB,EAAQC,GACb,GAAIG,GAAUJ,EAAOK,WAAW,MAC5B/C,EAAUvC,EAAEiF,EAEhB,IAAc,IAAVC,EAAa,CACf,GAAI1B,GAAQjB,EAAQiB,QAChBsC,EAASvD,EAAQuD,QAErBb,GAAOzB,MAAQA,EAAQ0B,EACvBD,EAAOa,OAASA,EAASZ,EAEzBG,EAAQD,MAAMF,EAAOA,KJwZnBjB,UAAU,EACVP,cAAc,GI7YpByB,MJ0ZMpB,MI1ZD,SAACiB,EAAQC,EAAQC,EAAOzD,GAC3B,GAAI4D,GAAUJ,EAAOK,WAAW,MAC5BS,EAAId,EAAOzB,MACXwC,EAAIf,EAAOa,OACXG,EAAIf,CAERzD,GAAUA,MAEV4D,EAAQa,UAAYzE,EAAQ6B,OAAOE,MACnC6B,EAAQc,YAAc1E,EAAQ6B,OAAOG,MAErC4B,EAAQe,UAAU,EAAG,EAAGL,EAAGC,GAC3BX,EAAQgB,WAER,KAAK,GAAIC,GAAI,EAAGC,EAAIvB,EAAOwB,OAAYD,EAAJD,EAAOA,IACxCjB,EAAQoB,OAAOH,GAAKP,EAAIQ,GAAIP,GAAM,EAAIC,GAAMjB,EAAOsB,IAAMN,GAAK,EAAIC,IAGpEZ,GAAQ/B,SACR+B,EAAQqB,aJ4ZJzC,UAAU,EACVP,cAAc,KIvfhBnC,IJ8fJf,GAAOf,QIhaM8B,IJkaf,SAAWjC,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,0BAA2B,UAAW,SAAU,SAAU,oBAAqBD,GAC1D,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,OAAQd,QAAQ,UAAWA,QAAQ,sBAErD,SAAUD,EAASe,EAAQb,EAASgH,GACrC,YAEA,IAAI9G,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GAEnFa,EAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhM8F,EAAO,QAASrD,GAAIsD,EAAQC,EAAUC,GAAY,GAAIC,GAAOjG,OAAOkG,yBAAyBJ,EAAQC,EAAW,IAAaxG,SAAT0G,EAAoB,CAAE,GAAI1E,GAASvB,OAAOmG,eAAeL,EAAS,OAAe,QAAXvE,EAA0BhC,OAA2BiD,EAAIjB,EAAQwE,EAAUC,GAAoB,GAAI,SAAWC,IAAQA,EAAK/C,SAAY,MAAO+C,GAAKjD,KAAgB,IAAIoD,GAASH,EAAKzD,GAAK,OAAejD,UAAX6G,EAA+B7G,OAAoB6G,EAAOC,KAAKL,IAEvbM,EAAY,SAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIlG,WAAU,iEAAoEkG,GAAeD,GAASrG,UAAYF,OAAOyG,OAAOD,GAAcA,EAAWtG,WAAawG,aAAe1D,MAAOuD,EAAUI,YAAY,EAAOzD,UAAU,EAAMP,cAAc,KAAe6D,IAAYD,EAASK,UAAYJ,IAE9ZrG,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCKxhBlHrB,EAACH,EAAAF,GAEDgE,EAAO9D,EAAA8G,GAORjC,EAAK,SAASf,GAuDN,QAvDRe,GAuDSE,GLseT,GAAIlD,GAAQtB,IAEZc,GAAgBd,KK/hBhBsE,GAwDFkC,EAAA7F,OAAAmG,eAxDExC,EAAKzD,WAAA,cAAAb,MAAAgH,KAAAhH,MA0DPA,KAAKwE,OAASA,CAEd,IAAIgD,GAAOxH,KAAKwE,OAAOiD,KAAO7H,EAAEI,KAAKwE,QAAQkD,KAC3C,wDACA,GAAGD,GAELzH,MAAK2H,UACL3H,KAAK4H,UACL5H,KAAK4E,OAAS,GAAIiD,cAAa7H,KAAK8H,YAEpCxD,EAAMyD,iBAAiB,WACrBzG,EAAKK,MAAQ2C,EAAM0D,aAAaC,aAC9BC,IAAKV,EACL3F,QAAQ,EACRsG,UAAU,EACVC,aAAc,WACZ9G,EAAKwC,UAEPuE,aAAc,WACZ/G,EAAKmC,SAAWnC,EAAKgH,YAAchH,EAAKiH,YAE1CC,OAAQ,WACNlH,EAAKkC,QAAS,EACdlC,EAAKmC,SAAW,EAChBnC,EAAKsC,QAAQ,WAEf6E,OAAQ,WLweJ,MKxeUnH,GAAKoB,QACnBgG,SAAU,WL0eN,MK1eYpH,GAAKoB,QACrBiG,QAAS,WL4eL,MK5eWrH,GAAKuB,SACpB+F,SAAU,WL8eN,MK9eYtH,GAAKuB,aLklBzB,MA9FAoE,GK3kBE3C,EAAcf,GL6kBhBhD,EK7kBE+D,GACOuE,kBL8kBL1F,IK9kBsB,WAC1B,OACE2F,GAAI,uBACJC,IAAK,0BLilBHzF,cAAc,GK7kBbyE,kBLglBDpE,MKhlBkB,SAACqF,GACvBtE,OAAOuE,WAAY,EAEnBrJ,EAAEsJ,MACAC,SAAU,SACVC,OAAO,EACPlB,IAAK5D,EAAMuE,iBAAiBC,GAC5BO,QAAS,WACF/E,EAAM0D,eACT1D,EAAM0D,aAAe,GAAIsB,cAEzB1J,EAAE2B,QAAO,EAAM+C,EAAM0D,cACnBuB,aAAc,EACdC,eACEC,iBAAiB,GAEnBC,aAAa,EACbC,eAAe,EACfF,iBAAiB,EACjBG,oBAAoB,EACpBC,gBAAgB,EAChBC,WAAW,EACXC,WAAW,EACXC,YAAY,EACZ9B,IAAK5D,EAAMuE,iBAAiBE,MAG9BzE,EAAM0D,aAAaiC,oBAKrBvF,OAAOsD,aAAe1D,EAAM0D,aAE5B1D,EAAM0D,aAAakC,QAAQ,WLilBnB,MKjlByBlB,WLslBjCnF,UAAU,EACVP,cAAc,KKllBhBwE,YLslBE3E,IKtlBS,WACb,MAAO,OLwlBHG,cAAc,GKrlBhB6G,YLwlBEhH,IKxlBS,WACb,MAAO,QL0lBHG,cAAc,GKljBpBQ,QLqjBMH,MKrjBC,WACL,GAAK3D,KAAKwD,QAAWxD,KAAK4C,QAA1B,CAIA5C,KAAK2H,OAAS3H,KAAK2B,MAAMyI,aAAaC,KACtCrK,KAAK4H,OAAS5H,KAAK2B,MAAMyI,aAAaE,KAItC,KAAK,GAFDC,GAAGrK,OAEEgG,EAAI,EAAGsE,EAAIxK,KAAK2H,OAAOvB,OAAYoE,EAAJtE,EAAOA,IAC7CqE,EAAME,WAAWzK,KAAK2H,OAAOzB,IAAMuE,WAAWzK,KAAK4H,OAAO1B,IAE1DlG,KAAK4E,OAAO,EAAIsB,GAAKqE,EAAM,EAC3BvK,KAAK4E,OAAW,EAAJsB,EAAQ,GAAKqE,EAAM,CAGjC/D,GAAA7F,OAAAmG,eA7GExC,EAAKzD,WAAA,SAAAb,MAAAgH,KAAAhH,QLoqBH6D,UAAU,EACVP,cAAc,KKrqBhBgB,GAAcf,EL4qBlBnD,GAAOf,QK3jBMiF,IL6jBf,SAAWpF,GACa,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,8BAA+B,UAAW,SAAU,oBAAqBD,GACpD,mBAAZG,UAA6C,mBAAXe,SAClDlB,EAAQG,QAASe,OAAQd,QAAQ,sBAElC,SAAUD,EAASe,EAAQmG,GAC5B,YAEA,IAAI9G,GAAkB,SAAUC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,EAAI,WAAaA,GAEnFa,EAAuB,SAAUC,EAAOC,EAAaC,GAAqBD,GAAaE,OAAOC,iBAAiBJ,EAAOC,GAAkBC,GAAeC,OAAOC,iBAAiBJ,EAAMK,UAAWH,IAEhM8F,EAAO,QAASrD,GAAIsD,EAAQC,EAAUC,GAAY,GAAIC,GAAOjG,OAAOkG,yBAAyBJ,EAAQC,EAAW,IAAaxG,SAAT0G,EAAoB,CAAE,GAAI1E,GAASvB,OAAOmG,eAAeL,EAAS,OAAe,QAAXvE,EAA0BhC,OAA2BiD,EAAIjB,EAAQwE,EAAUC,GAAoB,GAAI,SAAWC,IAAQA,EAAK/C,SAAY,MAAO+C,GAAKjD,KAAgB,IAAIoD,GAASH,EAAKzD,GAAK,OAAejD,UAAX6G,EAA+B7G,OAAoB6G,EAAOC,KAAKL,IAEvbM,EAAY,SAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIlG,WAAU,iEAAoEkG,GAAeD,GAASrG,UAAYF,OAAOyG,OAAOD,GAAcA,EAAWtG,WAAawG,aAAe1D,MAAOuD,EAAUI,YAAY,EAAOzD,UAAU,EAAMP,cAAc,KAAe6D,IAAYD,EAASK,UAAYJ,IAE9ZrG,EAAkB,SAAUC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,sCMxsBlHsC,EAAO9D,EAAA8G,GAORhC,EAAQ,SAAShB,GAeT,QAfRgB,GAeSC,GNqsBT,GAAIlD,GAAQtB,IAEZc,GAAgBd,KMttBhBuE,GAgBFiC,EAAA7F,OAAAmG,eAhBEvC,EAAQ1D,WAAA,cAAAb,MAAAgH,KAAAhH,MAkBVA,KAAKiF,QAAU,GAAIN,cAEnB3E,KAAK2B,MAAQ6C,EAERxE,KAAKiF,QAAQyF,wBAChB1K,KAAKiF,QAAQyF,sBAAwB1K,KAAKiF,QAAQ0F,sBAGpD3K,KAAK4K,UAAY5K,KAAKiF,QAAQyF,sBAC5B1K,KAAK8H,WAAa,EAAG,EAAG,GAG1B9H,KAAK4K,UAAUC,eAAiB,SAACC,GNusB7B,MMvsBmCxJ,GAAKwC,OAAOgH,IAE9C9K,KAAKiF,QAAQ8F,aAChB/K,KAAKiF,QAAQ8F,WAAa/K,KAAKiF,QAAQ+F,gBAGzChL,KAAKiL,KAAOjL,KAAKiF,QAAQ8F,aAEzB/K,KAAK4E,OAAS,GAAIiD,cAAa7H,KAAK8H,WAAa,GAE7C9H,KAAK2B,MAAMuJ,WAAa,EAC1BlL,KAAK2B,MAAMwJ,UAAY,WNysBnB,MMzsByB7J,GAAK8J,WAGlCpL,KAAKoL,UAGPpL,KAAK2B,MAAM0J,WAAa,SAACP,GACvB,GAAIQ,GAASR,EAAES,aAEXD,GAAOE,WACTlK,EAAKmC,SAAW6H,EAAOG,SAASC,IAAI,GAAKJ,EAAOE,WAIpDxL,KAAK2B,MAAMgK,UAAY,WN0sBnB,MM1sByBrK,GAAKoB,QAClC1C,KAAK2B,MAAMgH,QAAU,WN4sBjB,MM5sBuBrH,GAAKuB,SNyxBhC,MAzEAoE,GMxwBE1C,EAAiBhB,GN0wBnBhD,EM1wBEgE,EAAQ,MAMRuD,YN4wBE3E,IM5wBS,WACb,MAAO,ON8wBHG,cAAc,GMrtBpBQ,QN+tBMH,MM/tBC,SAACmH,GACN,GAAK9K,KAAKwD,QAAWxD,KAAK4C,QAA1B,CASA,IAAK,GAPDgJ,MACAC,EAAWf,EAAEgB,YAAYC,iBACzBC,EAAahM,KAAK8H,WAAa+D,EAC/BI,EAAM,SAACC,EAAMC,GACX,MAAOD,GAAKhG,GAAKiG,EAAKjG,IAGnBkG,EAAIP,EAAUO,KACrBR,EAAQ3H,KAAK6G,EAAEgB,YAAYO,eAAeD,GAG5C,KAAK,GAAIE,GAAI,EAAON,EAAJM,EAAgBA,IAE5BtM,KAAK4E,OAAO0H,GADVT,EAAW,EACID,EAAQW,OAAON,GAAOJ,EAGtBD,EAAQ,GAAGU,EAIhC9F,GAAA7F,OAAAmG,eAvFEvC,EAAQ1D,WAAA,SAAAb,MAAAgH,KAAAhH,QNuzBN6D,UAAU,EACVP,cAAc,GM3tBpB8H,SNmuBMzH,MMnuBE,WACN3D,KAAKwE,OAASxE,KAAKiF,QAAQuH,yBAAyBxM,KAAK2B,OAEzD3B,KAAKwE,OAAO4G,QAAQpL,KAAK4K,WACzB5K,KAAKwE,OAAO4G,QAAQpL,KAAKiL,MACzBjL,KAAKiL,KAAKG,QAAQpL,KAAKiF,QAAQwH,aAC/BzM,KAAK4K,UAAUQ,QAAQpL,KAAKiF,QAAQwH,aAEpCzM,KAAKwD,QAAS,EACdxD,KAAKyD,SAAW,EAChBzD,KAAK4D,QAAQ,WNquBTC,UAAU,EACVP,cAAc,KM70BhBiB,GAAiBhB,ENo1BrBnD,GAAOf,QMzuBMkF","file":"modem.js","sourcesContent":["import $ from \"jquery\";\nimport Streamer from \"streamer\"\n\n$.fn.streamer = function (options) {\n  return this.each(function () {\n    if ($.data(this, \"streamer\") === undefined) {\n      $.data(this, \"streamer\", new Streamer(this))\n    }\n  })\n}\n\n$(\"[data-streamer]\").streamer()\n","import $ from \"jquery\";\n\nimport Stream from \"streamer/stream\"\nimport Waveform from \"streamer/waveform\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {object}\n   */\n  get defaults () {\n    return {\n      stroke: {\n        width: 2\n      , color: \"#666\"\n      }\n    , classes: {\n        wrapper: \"streamer\"\n      , button: \"streamer-button\"\n      , icon: \"streamer-icon\"\n      }\n    , icons: {\n        play: \"ion-play\"\n      , pause: \"ion-pause\"\n      }\n    }\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {object} element The <audio> element to attach the Streamer to.\n   * @param {object} options Custom configuration options.\n   */\n  constructor (element, options) {\n    this.options = $.extend(this.defaults, options)\n\n    let classes = this.options.classes\n    let icons = this.options.icons\n\n    this.audio = element\n    this.$audio = $(this.audio)\n\n    this.stream = new Stream(this.audio)\n\n    this.$audio.wrap($(\"<div />\", {\n      \"class\": classes.wrapper\n    }))\n\n    this.$wrapper = this.$audio.parent()\n\n    this.$canvas = $(\"<canvas />\")\n    this.$wrapper.append(this.$canvas)\n\n    this.$button = $(\"<button />\", {\n      \"class\": classes.button\n    , \"type\": \"button\"\n    })\n    this.$wrapper.append(this.$button)\n\n    this.$icon = $(\"<span />\", {\n      \"class\": `${classes.icon} ${classes.icon}-play ${icons.play}`\n    })\n    this.$button.append(this.$icon)\n\n    this.$button.on(\"click\", (e) => {\n      (this.stream.playing) ? this.stream.pause() : this.stream.play()\n    })\n\n    this.stream.bind(\"play\", () => {\n      this.$icon.removeClass(`${classes.icon}-play ${icons.play}`)\n      this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$wrapper.addClass(\"is-playing\")\n    })\n\n    this.stream.bind(\"pause\", () => {\n      this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$icon.addClass(`${classes.icon}-play ${icons.play}`)\n      this.$wrapper.removeClass(\"is-playing\")\n    })\n\n    this.waveform = new Waveform(this.$canvas[0], this.stream, {\n      stroke: this.options.stroke\n    })\n  }\n}\n\nexport default Streamer;\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Adapter {\n  constructor () {\n    this.loaded = false\n    this.progress = 0\n    this.events = {}\n  }\n\n  play () {\n    if (this.playing) return\n\n    this.playing = true\n    this.trigger(\"play\")\n    this.audio.play()\n  }\n\n  pause () {\n    if (!this.playing) return\n\n    this.playing = false\n    this.trigger(\"pause\")\n    this.audio.pause()\n  }\n\n  update () {\n    this.trigger(\"update\")\n  }\n\n  bind (event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = []\n    }\n\n    this.events[event].push(callback)\n\n    return this\n  }\n\n  unbind (event) {\n    if (this.events[event]) {\n      delete this.events[event]\n    }\n\n    return this\n  }\n\n  trigger (event) {\n    if (this.events[event]) {\n      this.events[event].forEach((callback) => callback())\n    }\n\n    return this\n  }\n}\n\nexport default Adapter\n","import Flash from \"streamer/adapter/flash\"\nimport WebAudio from \"streamer/adapter/web-audio\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Stream {\n  /**\n   * Detect support for different APIs and return the appropriate audio\n   * adapter.\n   *\n   * This enables easy access to the different adapters:\n   *\n   *   new Streamer.Adapter(source)\n   *\n   * @return {Adapter} The Adapter constructor for the supported API.\n   */\n  static get Adapter () {\n    let audioEl = new Audio()\n\n    if (window.AudioContext) {\n      return WebAudio\n    }\n    else {\n      return Flash\n    }\n  }\n\n  /**\n   * @constructor\n   */\n  constructor (source) {\n    this.audio = new Stream.Adapter(source)\n  }\n\n  /**\n   * @type {Array}\n   */\n  get signal () {\n    return this.audio.signal\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get playing () {\n    return this.audio.playing\n  }\n\n  play () {\n    this.audio.play()\n  }\n\n  pause () {\n    this.audio.pause()\n  }\n\n  bind (event, callback) {\n    this.audio.bind(event, callback)\n  }\n\n  unbind (event) {\n    this.audio.unbind(event)\n  }\n\n  trigger (event) {\n    this.audio.trigger(event)\n  }\n}\n\nexport default Stream\n","import $ from \"jquery\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Waveform {\n  /**\n   * Initialize a waveform.\n   *\n   * @param {Object} canvas   The canvas on which to draw the waveform.\n   * @param {Stream} stream   The stream to use for constructing the waveform.\n   * @param {Object} options  Configuration options.\n   * @constructor\n   */\n  constructor (canvas, stream, options) {\n    let ratio = this.ratio(canvas)\n      , draw = () => {\n          this.draw(stream.signal, canvas, ratio, options)\n        }\n      , scale = () => {\n          this.scale(canvas, ratio)\n          draw()\n        }\n\n    scale()\n    $(window).on('resize', () => scale())\n    stream.bind('update', () => draw())\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {Object} canvas The canvas for which to calculate the pixel ratio.\n   * @return  {Number}        The canvas pixel ratio.\n   */\n  ratio (canvas) {\n    let context = canvas.getContext(\"2d\")\n      , devicePixelRatio = window.devicePixelRatio || 1\n      , backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n\n    return devicePixelRatio / backingStoreRatio\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {Number} ratio The ratio with which to scale the canvas.\n   */\n  scale (canvas, ratio) {\n    let context = canvas.getContext(\"2d\")\n      , $canvas = $(canvas)\n\n    if (ratio !== 1) {\n      let width = $canvas.width()\n        , height = $canvas.height()\n\n      canvas.width = width * ratio\n      canvas.height = height * ratio\n\n      context.scale(ratio, ratio)\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}   signal  The waveform signal to draw.\n   * @param {Object}  canvas  The canvas on which to draw the waveform.\n   * @param {Number}  ratio   The pixel ratio to draw at.\n   * @param {Object}  options Configuration options.\n   */\n  draw (signal, canvas, ratio, options) {\n    let context = canvas.getContext(\"2d\")\n      , w = canvas.width\n      , h = canvas.height\n      , r = ratio\n\n    options = options || {}\n\n    context.lineWidth = options.stroke.width\n    context.strokeStyle = options.stroke.color\n\n    context.clearRect(0, 0, w, h)\n    context.beginPath()\n\n    for (let i = 0, l = signal.length; i < l; i++) {\n      context.lineTo(i * (w / l), (h / (2 * r)) + signal[i] * (h / (2 * r)))\n    }\n\n    context.stroke();\n    context.closePath();\n  }\n}\n\nexport default Waveform\n","import $ from \"jquery\"\n\nimport Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Flash extends Adapter {\n  static get soundManagerPath () {\n    return {\n      js: \"lib/soundmanager2.js\"\n    , swf: \"lib/soundmanager2.swf\"\n    }\n  }\n\n  static loadSoundManager (done) {\n    window.SM2_DEFER = true\n\n    $.ajax({\n      dataType: \"script\"\n    , cache: true\n    , url: Flash.soundManagerPath.js\n    , success: () => {\n        if (!Flash.soundManager) {\n          Flash.soundManager = new SoundManager()\n\n          $.extend(true, Flash.soundManager, {\n            flashVersion: 9\n          , flash9Options: {\n              useWaveformData: true\n            }\n          , preferFlash: true\n          , useHTML5Audio: false\n          , useWaveformData: true\n          , useHighPerformance: true\n          , useFastPolling: true\n          , multiShot: false\n          , debugMode: false\n          , debugFlash: false\n          , url: Flash.soundManagerPath.swf\n          })\n\n          Flash.soundManager.beginDelayedInit()\n        }\n\n        // Expose the Sound Manager instance globally so that Flash can attach\n        // to it.\n        window.soundManager = Flash.soundManager\n\n        Flash.soundManager.onready(() => done())\n      }\n    })\n  }\n\n  get sampleSize () {\n    return 1024\n  }\n\n  get sampleRate () {\n    return 44100\n  }\n\n  constructor (source) {\n    super()\n\n    this.source = source\n\n    let path = this.source.src || $(this.source).find(\n      \"source[src$=mp3], source[src$=mp4], source[src$=m4a]\"\n    )[0].src\n\n    this.wave_L = []\n    this.wave_R = []\n    this.signal = new Float32Array(this.sampleSize)\n\n    Flash.loadSoundManager(() => {\n      this.audio = Flash.soundManager.createSound({\n        url: path\n      , stream: true\n      , autoLoad: true\n      , whileplaying: () => {\n          this.update()\n        }\n      , whileloading: () => {\n          this.progress = this.bytesLoaded / this.bytesTotal\n        }\n      , onload: () => {\n          this.loaded = true\n          this.progress = 1\n          this.trigger(\"loaded\")\n        }\n      , onplay: () => this.play()\n      , onresume: () => this.play()\n      , onpause: () => this.pause()\n      , onfinish: () => this.pause()\n      })\n    })\n  }\n\n  update () {\n    if (!this.loaded && !this.playing) {\n      return\n    }\n\n    this.wave_L = this.audio.waveformData.left;\n    this.wave_R = this.audio.waveformData.right;\n\n    let avg;\n\n    for (let i = 0, j = this.wave_L.length; i < j; i++) {\n      avg = parseFloat(this.wave_L[i]) + parseFloat(this.wave_R[i]);\n\n      this.signal[2 * i] = avg / 2;\n      this.signal[i * 2 + 1] = avg / 2;\n    }\n\n    super.update()\n  }\n}\n\nexport default Flash\n","import Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass WebAudio extends Adapter {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 2048\n  }\n\n  /**\n   * Initialize Web Audio adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    this.context = new AudioContext()\n\n    this.audio = source\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    )\n\n    this.processor.onaudioprocess = (e) => this.update(e)\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode\n    }\n\n    this.gain = this.context.createGain()\n\n    this.signal = new Float32Array(this.sampleSize / 2)\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect()\n    }\n    else {\n      this.connect()\n    }\n\n    this.audio.onprogress = (e) => {\n      let target = e.currentTarget\n\n      if (target.duration) {\n        this.progress = target.seekable.end(0) / target.duration\n      }\n    }\n\n    this.audio.onplaying = () => this.play()\n    this.audio.onpause = () => this.pause()\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update (e) {\n    if (!this.loaded || !this.playing) return\n\n    let buffers = []\n      , channels = e.inputBuffer.numberOfChannels\n      , resolution = this.sampleSize / channels\n      , sum = (prev, curr) => {\n          return prev[i] + curr[i]\n        }\n\n    for (let i = channels; i--;) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce(sum) / channels\n      }\n      else {\n        this.signal[i] = buffers[0][i]\n      }\n    }\n\n    super.update()\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect () {\n    this.source = this.context.createMediaElementSource(this.audio)\n\n    this.source.connect(this.processor)\n    this.source.connect(this.gain)\n    this.gain.connect(this.context.destination)\n    this.processor.connect(this.context.destination)\n\n    this.loaded = true\n    this.progress = 1\n    this.trigger(\"loaded\")\n  }\n}\n\nexport default WebAudio\n"],"sourceRoot":"/src/js"}