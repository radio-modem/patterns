"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("modem",["jquery"],function(t){t="default"in t?t["default"]:t;var e=function(){function t(e){var i=this;_classCallCheck(this,t),this.loaded=!1,this.events={};var n=window.AudioContext||window.webkitAudioContext;this.context=new n,this.audio=e,this.context.createScriptProcessor||(this.context.createScriptProcessor=this.context.createJavascriptNode),this.processor=this.context.createScriptProcessor(this.sampleSize/2,1,1),this.processor.onaudioprocess=function(t){return i.update(t)},this.context.createGain||(this.context.createGain=this.context.createGainNode),this.gain=this.context.createGain(),this.signal=new Float32Array(this.sampleSize/2),this.audio.readyState<3?this.audio.oncanplay=function(){return i.connect()}:this.connect(),this.audio.onplaying=function(){return i.play()},this.audio.onpause=function(){return i.pause()}}return _createClass(t,[{key:"sampleSize",get:function(){return 2048}}]),_createClass(t,[{key:"update",value:function(t){var e=this;if(this.loaded&&this.playing){for(var i=[],n=t.inputBuffer.numberOfChannels,a=this.sampleSize/n,s=n-1;s>=0;s--)i.push(t.inputBuffer.getChannelData(s));for(var o=function(t){n>1?e.signal[t]=i.reduce(function(e,i){return e[t]+i[t]})/n:e.signal[t]=i[0][t]},r=0;r<a;r++)o(r);this.trigger("update")}}},{key:"connect",value:function(){this.source=this.context.createMediaElementSource(this.audio),this.source.connect(this.processor),this.source.connect(this.gain),this.gain.connect(this.context.destination),this.processor.connect(this.context.destination),this.loaded=!0,this.trigger("loaded")}},{key:"play",value:function(){!this.playing&&this.audio&&(this.playing=!0,this.trigger("play"),this.audio.play())}},{key:"pause",value:function(){this.playing&&this.audio&&(this.playing=!1,this.trigger("pause"),this.audio.pause())}},{key:"bind",value:function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),this}},{key:"unbind",value:function(t){return this.events[t]&&Reflect.deleteProperty(this.events[t]),this}},{key:"trigger",value:function(t){return this.events[t]&&this.events[t].forEach(function(t){return t()}),this}}]),t}(),i=function(){function e(i,n,a){var s=this;_classCallCheck(this,e),this.options=t.extend(e.defaults,a);var o=this.ratio(i),r=function(){s.draw(n.signal,i,o)},c=function(){s.scale(i,o),r()};c(),t(window).on("resize",function(){return c()}),n.bind("update",function(){return r()})}return _createClass(e,null,[{key:"defaults",get:function(){return{stroke:{width:2,color:"#666"}}}}]),_createClass(e,[{key:"ratio",value:function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}},{key:"scale",value:function(e,i){var n=e.getContext("2d"),a=t(e);if(1!==i){var s=a.width(),o=a.height();e.width=s*i,e.height=o*i,n.scale(i,i)}}},{key:"draw",value:function(t,e,i){var n=e.getContext("2d"),a=e.width,s=e.height,o=i,r=t.length;n.lineWidth=this.options.stroke.width,n.strokeStyle=this.options.stroke.color,n.clearRect(0,0,a,s),n.beginPath();for(var c=0;c<r;c++)n.lineTo(c*(a/r),s/(2*o)+t[c]*(s/(2*o)));n.stroke(),n.closePath()}}]),e}(),n=function(){function n(a,s){var o=this;_classCallCheck(this,n),this.options=t.extend(n.defaults,s),a.addEventListener("error",function(t){return o.onError(t)},!0);var r=this.options,c=r.classes,u=r.icons,l=r.labels;this.audio=new e(a),this.$audio=t(a),this.$audio.wrap(t("<div />",{"class":c.wrapper})),this.$wrapper=this.$audio.parent(),this.$canvas=t("<canvas />"),this.$wrapper.append(this.$canvas),this.$button=t("<button />",{"class":c.button,type:"button","aria-label":l.play}),this.$wrapper.append(this.$button),this.$icon=t("<span />",{"class":c.icon+" "+c.icon+"-play "+u.play}),this.$button.append(this.$icon),this.audio.bind("play",function(){return o.onPlay()}),this.audio.bind("pause",function(){return o.onPause()}),this.$button.on("click",function(){return o.onButtonClick()}),a.autoplay&&this.audio.play(),this.waveform=new i(this.$canvas[0],this.audio,this.options.waveform)}return _createClass(n,null,[{key:"defaults",get:function(){return{classes:{wrapper:"streamer",button:"streamer-button",icon:"streamer-icon"},icons:{play:"ion-play",pause:"ion-pause",error:"ion-alert"},labels:{play:"Continue playing",pause:"Stop playing"}}}}]),_createClass(n,[{key:"onPlay",value:function(){var t=this.options,e=t.labels,i=t.icons,n=t.classes;this.$button.attr("aria-label",e.pause),this.$icon.removeClass(n.icon+"-play "+i.play),this.$icon.addClass(n.icon+"-pause "+i.pause),this.$wrapper.addClass("is-playing")}},{key:"onPause",value:function(){var t=this.options,e=t.labels,i=t.icons,n=t.classes;this.$button.attr("aria-label",e.play),this.$icon.removeClass(n.icon+"-pause "+i.pause),this.$icon.addClass(n.icon+"-play "+i.play),this.$wrapper.removeClass("is-playing")}},{key:"onButtonClick",value:function(){this.error&&this.$audio[0].load(),this.audio.playing?this.audio.pause():this.audio.play()}},{key:"onError",value:function(t){this.error=t,this.audio.pause()}}]),n}(),a=function(){function e(i,n){var a=this;_classCallCheck(this,e),this.options=t.extend(this.defaults,n),this.$element=t(i);var s=this.options.classes,o=this.$element.find("[data-slide-in-close]"),r=t("[data-slide-in-toggle="+this.$element.attr("id")+"]");r.on("click",function(){a.$element.hasClass(s.open)?a.hide():a.show()}),o.on("click",function(){a.$element.hasClass(s.open)?a.hide():a.show()})}return _createClass(e,[{key:"defaults",get:function(){return{classes:{open:"is-open"}}}}]),_createClass(e,[{key:"show",value:function(){this.$element.addClass(this.options.classes.open)}},{key:"hide",value:function(){this.$element.removeClass(this.options.classes.open)}}]),e}();t.fn.streamer=function(e){return this.each(function(i,a){void 0===t.data(a,"streamer")&&t.data(a,"streamer",new n(a,e))})},t("[data-streamer]").streamer(),t.fn.slideIn=function(e){return this.each(function(i,n){void 0===t.data(n,"slide-in")&&t.data(n,"slide-in",new a(n,e))})},t("[data-slide-in]").slideIn()});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("modem",["jquery"],function(t){t="default"in t?t["default"]:t;var e=function(){function e(i,n){var a=this;_classCallCheck(this,e),this.options=t.extend(this.defaults,n),this.$element=t(i);var s=this.options.classes,o=this.$element.find("[data-slide-in-close]"),r=t("[data-slide-in-toggle="+this.$element.attr("id")+"]");r.on("click",function(){a.$element.hasClass(s.open)?a.hide():a.show()}),o.on("click",function(){a.$element.hasClass(s.open)?a.hide():a.show()})}return _createClass(e,[{key:"defaults",get:function(){return{classes:{open:"is-open"}}}}]),_createClass(e,[{key:"show",value:function(){this.$element.addClass(this.options.classes.open)}},{key:"hide",value:function(){this.$element.removeClass(this.options.classes.open)}}]),e}();return e});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("modem",["jquery"],function(t){t="default"in t?t["default"]:t;var e=function(){function t(e){var i=this;_classCallCheck(this,t),this.loaded=!1,this.events={};var n=window.AudioContext||window.webkitAudioContext;this.context=new n,this.audio=e,this.context.createScriptProcessor||(this.context.createScriptProcessor=this.context.createJavascriptNode),this.processor=this.context.createScriptProcessor(this.sampleSize/2,1,1),this.processor.onaudioprocess=function(t){return i.update(t)},this.context.createGain||(this.context.createGain=this.context.createGainNode),this.gain=this.context.createGain(),this.signal=new Float32Array(this.sampleSize/2),this.audio.readyState<3?this.audio.oncanplay=function(){return i.connect()}:this.connect(),this.audio.onplaying=function(){return i.play()},this.audio.onpause=function(){return i.pause()}}return _createClass(t,[{key:"sampleSize",get:function(){return 2048}}]),_createClass(t,[{key:"update",value:function(t){var e=this;if(this.loaded&&this.playing){for(var i=[],n=t.inputBuffer.numberOfChannels,a=this.sampleSize/n,s=n-1;s>=0;s--)i.push(t.inputBuffer.getChannelData(s));for(var o=function(t){n>1?e.signal[t]=i.reduce(function(e,i){return e[t]+i[t]})/n:e.signal[t]=i[0][t]},r=0;r<a;r++)o(r);this.trigger("update")}}},{key:"connect",value:function(){this.source=this.context.createMediaElementSource(this.audio),this.source.connect(this.processor),this.source.connect(this.gain),this.gain.connect(this.context.destination),this.processor.connect(this.context.destination),this.loaded=!0,this.trigger("loaded")}},{key:"play",value:function(){!this.playing&&this.audio&&(this.playing=!0,this.trigger("play"),this.audio.play())}},{key:"pause",value:function(){this.playing&&this.audio&&(this.playing=!1,this.trigger("pause"),this.audio.pause())}},{key:"bind",value:function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),this}},{key:"unbind",value:function(t){return this.events[t]&&Reflect.deleteProperty(this.events[t]),this}},{key:"trigger",value:function(t){return this.events[t]&&this.events[t].forEach(function(t){return t()}),this}}]),t}(),i=function(){function e(i,n,a){var s=this;_classCallCheck(this,e),this.options=t.extend(e.defaults,a);var o=this.ratio(i),r=function(){s.draw(n.signal,i,o)},c=function(){s.scale(i,o),r()};c(),t(window).on("resize",function(){return c()}),n.bind("update",function(){return r()})}return _createClass(e,null,[{key:"defaults",get:function(){return{stroke:{width:2,color:"#666"}}}}]),_createClass(e,[{key:"ratio",value:function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}},{key:"scale",value:function(e,i){var n=e.getContext("2d"),a=t(e);if(1!==i){var s=a.width(),o=a.height();e.width=s*i,e.height=o*i,n.scale(i,i)}}},{key:"draw",value:function(t,e,i){var n=e.getContext("2d"),a=e.width,s=e.height,o=i,r=t.length;n.lineWidth=this.options.stroke.width,n.strokeStyle=this.options.stroke.color,n.clearRect(0,0,a,s),n.beginPath();for(var c=0;c<r;c++)n.lineTo(c*(a/r),s/(2*o)+t[c]*(s/(2*o)));n.stroke(),n.closePath()}}]),e}(),n=function(){function n(a,s){var o=this;_classCallCheck(this,n),this.options=t.extend(n.defaults,s),a.addEventListener("error",function(t){return o.onError(t)},!0);var r=this.options,c=r.classes,u=r.icons,l=r.labels;this.audio=new e(a),this.$audio=t(a),this.$audio.wrap(t("<div />",{"class":c.wrapper})),this.$wrapper=this.$audio.parent(),this.$canvas=t("<canvas />"),this.$wrapper.append(this.$canvas),this.$button=t("<button />",{"class":c.button,type:"button","aria-label":l.play}),this.$wrapper.append(this.$button),this.$icon=t("<span />",{"class":c.icon+" "+c.icon+"-play "+u.play}),this.$button.append(this.$icon),this.audio.bind("play",function(){return o.onPlay()}),this.audio.bind("pause",function(){return o.onPause()}),this.$button.on("click",function(){return o.onButtonClick()}),a.autoplay&&this.audio.play(),this.waveform=new i(this.$canvas[0],this.audio,this.options.waveform)}return _createClass(n,null,[{key:"defaults",get:function(){return{classes:{wrapper:"streamer",button:"streamer-button",icon:"streamer-icon"},icons:{play:"ion-play",pause:"ion-pause",error:"ion-alert"},labels:{play:"Continue playing",pause:"Stop playing"}}}}]),_createClass(n,[{key:"onPlay",value:function(){var t=this.options,e=t.labels,i=t.icons,n=t.classes;this.$button.attr("aria-label",e.pause),this.$icon.removeClass(n.icon+"-play "+i.play),this.$icon.addClass(n.icon+"-pause "+i.pause),this.$wrapper.addClass("is-playing")}},{key:"onPause",value:function(){var t=this.options,e=t.labels,i=t.icons,n=t.classes;this.$button.attr("aria-label",e.play),this.$icon.removeClass(n.icon+"-pause "+i.pause),this.$icon.addClass(n.icon+"-play "+i.play),this.$wrapper.removeClass("is-playing")}},{key:"onButtonClick",value:function(){this.error&&this.$audio[0].load(),this.audio.playing?this.audio.pause():this.audio.play()}},{key:"onError",value:function(t){this.error=t,this.audio.pause()}}]),n}();return n});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("modem",["jquery"],function(t){t="default"in t?t["default"]:t;var e=function(){function e(i,n,a){var s=this;_classCallCheck(this,e),this.options=t.extend(e.defaults,a);var o=this.ratio(i),r=function(){s.draw(n.signal,i,o)},c=function(){s.scale(i,o),r()};c(),t(window).on("resize",function(){return c()}),n.bind("update",function(){return r()})}return _createClass(e,null,[{key:"defaults",get:function(){return{stroke:{width:2,color:"#666"}}}}]),_createClass(e,[{key:"ratio",value:function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}},{key:"scale",value:function(e,i){var n=e.getContext("2d"),a=t(e);if(1!==i){var s=a.width(),o=a.height();e.width=s*i,e.height=o*i,n.scale(i,i)}}},{key:"draw",value:function(t,e,i){var n=e.getContext("2d"),a=e.width,s=e.height,o=i,r=t.length;n.lineWidth=this.options.stroke.width,n.strokeStyle=this.options.stroke.color,n.clearRect(0,0,a,s),n.beginPath();for(var c=0;c<r;c++)n.lineTo(c*(a/r),s/(2*o)+t[c]*(s/(2*o)));n.stroke(),n.closePath()}}]),e}();return e});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("modem",function(){var t=function(){function t(e){var i=this;_classCallCheck(this,t),this.loaded=!1,this.events={};var n=window.AudioContext||window.webkitAudioContext;this.context=new n,this.audio=e,this.context.createScriptProcessor||(this.context.createScriptProcessor=this.context.createJavascriptNode),this.processor=this.context.createScriptProcessor(this.sampleSize/2,1,1),this.processor.onaudioprocess=function(t){return i.update(t)},this.context.createGain||(this.context.createGain=this.context.createGainNode),this.gain=this.context.createGain(),this.signal=new Float32Array(this.sampleSize/2),this.audio.readyState<3?this.audio.oncanplay=function(){return i.connect()}:this.connect(),this.audio.onplaying=function(){return i.play()},this.audio.onpause=function(){return i.pause()}}return _createClass(t,[{key:"sampleSize",get:function(){return 2048}}]),_createClass(t,[{key:"update",value:function(t){var e=this;if(this.loaded&&this.playing){for(var i=[],n=t.inputBuffer.numberOfChannels,a=this.sampleSize/n,s=n-1;s>=0;s--)i.push(t.inputBuffer.getChannelData(s));for(var o=function(t){n>1?e.signal[t]=i.reduce(function(e,i){return e[t]+i[t]})/n:e.signal[t]=i[0][t]},r=0;r<a;r++)o(r);this.trigger("update")}}},{key:"connect",value:function(){this.source=this.context.createMediaElementSource(this.audio),this.source.connect(this.processor),this.source.connect(this.gain),this.gain.connect(this.context.destination),this.processor.connect(this.context.destination),this.loaded=!0,this.trigger("loaded")}},{key:"play",value:function(){!this.playing&&this.audio&&(this.playing=!0,this.trigger("play"),this.audio.play())}},{key:"pause",value:function(){this.playing&&this.audio&&(this.playing=!1,this.trigger("pause"),this.audio.pause())}},{key:"bind",value:function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),this}},{key:"unbind",value:function(t){return this.events[t]&&Reflect.deleteProperty(this.events[t]),this}},{key:"trigger",value:function(t){return this.events[t]&&this.events[t].forEach(function(t){return t()}),this}}]),t}();return t});
//# sourceMappingURL=modem.js.map
