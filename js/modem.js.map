{"version":3,"sources":["modem.js","slide-in.js","streamer.js","streamer/adapter.js","streamer/stream.js","streamer/waveform.js","streamer/adapter/flash.js","streamer/adapter/web-audio.js"],"names":["global","factory","define","amd","exports","require","mod","$","Streamer","SlideIn","modem","this","_jquery","_streamer","_slideIn","_interopRequire","obj","__esModule","_$","_Streamer","_SlideIn","fn","streamer","options","each","index","element","undefined","data","slideIn","module","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_this","extend","defaults","$element","classes","$close","find","$toggle","attr","on","hasClass","open","hide","show","get","value","addClass","removeClass","Stream","Waveform","_streamerStream","_streamerWaveform","_Stream","_Waveform","icons","labels","audio","$audio","stream","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","aria-label","play","$icon","icon","bind","pause","playing","autoplay","waveform","stroke","width","color","streamerAdapter","Adapter","loaded","progress","events","trigger","event","callback","push","forEach","Flash","WebAudio","streamerStream","_streamerAdapterFlash","_streamerAdapterWebAudio","_Flash","_WebAudio","source","signal","unbind","window","AudioContext","streamerWaveform","canvas","ratio","draw","scale","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ctx","height","w","h","r","lineWidth","strokeStyle","clearRect","beginPath","l","lineTo","closePath","streamerAdapterFlash","_streamerAdapter","_get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","call","_inherits","subClass","superClass","create","constructor","__proto__","_Adapter2","_Adapter","path","src","wave_L","wave_R","Float32Array","sampleSize","loadSoundManager","soundManager","createSound","url","autoLoad","whileplaying","update","whileloading","bytesLoaded","bytesTotal","onload","onplay","onresume","onpause","onfinish","waveformData","left","right","avg","j","parseFloat","js","swf","done","SM2_DEFER","ajax","dataType","cache","soundManagerPath","success","lib","SoundManager","flashVersion","flash9Options","useWaveformData","preferFlash","useHTML5Audio","useHighPerformance","useFastPolling","multiShot","debugMode","debugFlash","beginDelayedInit","onready","streamerAdapterWebAudio","createScriptProcessor","createJavascriptNode","processor","onaudioprocess","e","createGain","createGainNode","gain","readyState","oncanplay","connect","onprogress","currentTarget","duration","seekable","end","onplaying","_this2","buffers","channels","inputBuffer","numberOfChannels","resolution","getChannelData","_loop","reduce","prev","curr","createMediaElementSource","destination"],"mappings":"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","file":"modem.js","sourcesContent":["import $ from \"jquery\"\nimport Streamer from \"streamer\"\nimport SlideIn from \"slide-in\"\n\n// Expose the Streamer as a jQuery plugin.\n$.fn.streamer = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, \"streamer\") === undefined) {\n      $.data(element, \"streamer\", new Streamer(element, options))\n    }\n  })\n}\n\n$(\"[data-streamer]\").streamer()\n\n$.fn.slideIn = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, \"slide-in\") === undefined) {\n      $.data(element, \"slide-in\", new SlideIn(element, options))\n    }\n  })\n}\n\n$(\"[data-slide-in]\").slideIn()\n","import $ from \"jquery\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass SlideIn {\n  /**\n   * Default Slide In options.\n   *\n   * @type {Object}\n   */\n  get defaults () {\n    return {\n      classes: {\n        open: \"is-open\"\n      }\n    }\n  }\n\n  /**\n   * Initialize a Slide In.\n   *\n   * @param {Object} element The element to attach the Slide In to.\n   * @param {Object} options Custom configuration options.\n   */\n  constructor (element, options) {\n    this.options = $.extend(this.defaults, options);\n\n    this.$element = $(element)\n\n    let classes = this.options.classes\n      , $close = this.$element.find(\"[data-slide-in-close]\")\n      , $toggle = $(\"[data-slide-in-toggle=\" + this.$element.attr(\"id\") + \"]\")\n\n    $toggle.on(\"click\", () => {\n      this.$element.hasClass(classes.open) ? this.hide() : this.show()\n    })\n\n    $close.on(\"click\", () => {\n      this.$element.hasClass(classes.open) ? this.hide() : this.show()\n    })\n  }\n\n  /**\n   * Show the Slide In.\n   */\n  show () {\n    this.$element.addClass(this.options.classes.open)\n  }\n\n  /**\n   * Hide the Slide In.\n   */\n  hide () {\n    this.$element.removeClass(this.options.classes.open)\n  }\n}\n\nexport default SlideIn\n","import $ from \"jquery\";\n\nimport Stream from \"streamer/stream\"\nimport Waveform from \"streamer/waveform\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {Object}\n   */\n  get defaults () {\n    return {\n      stroke: {\n        width: 2\n      , color: \"#666\"\n      }\n    , classes: {\n        wrapper: \"streamer\"\n      , button: \"streamer-button\"\n      , icon: \"streamer-icon\"\n      }\n    , icons: {\n        play: \"ion-play\"\n      , pause: \"ion-pause\"\n      }\n    , labels: {\n        play: \"Continue playing\"\n      , pause: \"Stop playing\"\n      }\n    }\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {Audio}   element The <audio> element to attach the Streamer to.\n   * @param {Object}  options Custom configuration options.\n   */\n  constructor (element, options) {\n    this.options = $.extend(this.defaults, options)\n\n    let classes = this.options.classes\n      , icons = this.options.icons\n      , labels = this.options.labels\n\n    this.audio = element\n    this.$audio = $(this.audio)\n\n    this.stream = new Stream(this.audio)\n\n    this.$audio.wrap($(\"<div />\", {\n      \"class\": classes.wrapper\n    }))\n\n    this.$wrapper = this.$audio.parent()\n\n    this.$canvas = $(\"<canvas />\")\n    this.$wrapper.append(this.$canvas)\n\n    this.$button = $(\"<button />\", {\n      \"class\": classes.button\n    , \"type\": \"button\"\n    , \"aria-label\": labels.play\n    })\n    this.$wrapper.append(this.$button)\n\n    this.$icon = $(\"<span />\", {\n      \"class\": `${classes.icon} ${classes.icon}-play ${icons.play}`\n    })\n    this.$button.append(this.$icon)\n\n    this.stream.bind(\"play\", () => {\n      this.$button.attr(\"aria-label\", labels.pause)\n      this.$icon.removeClass(`${classes.icon}-play ${icons.play}`)\n      this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$wrapper.addClass(\"is-playing\")\n    })\n\n    this.stream.bind(\"pause\", () => {\n      this.$button.attr(\"aria-label\", labels.play)\n      this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$icon.addClass(`${classes.icon}-play ${icons.play}`)\n      this.$wrapper.removeClass(\"is-playing\")\n    })\n\n    this.$button.on(\"click\", () => {\n      this.stream.playing ? this.stream.pause() : this.stream.play()\n    })\n\n    if (element.autoplay) this.stream.play()\n\n    this.waveform = new Waveform(this.$canvas[0], this.stream, {\n      stroke: this.options.stroke\n    })\n  }\n}\n\nexport default Streamer;\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Adapter {\n  /**\n   * Initialize an audio adapter.\n   *\n   * @constructor\n   */\n  constructor () {\n    this.loaded = false\n    this.progress = 0\n    this.events = {}\n  }\n\n  /**\n   * Start playing the audio.\n   */\n  play () {\n    if (this.playing) return\n\n    this.playing = true\n    this.trigger(\"play\")\n    this.audio.play()\n  }\n\n  /**\n   * Pause the audio.\n   */\n  pause () {\n    if (!this.playing) return\n\n    this.playing = false\n    this.trigger(\"pause\")\n    this.audio.pause()\n  }\n\n  /**\n   * Trigger an update of the audio.\n   */\n  update () {\n    this.trigger(\"update\")\n  }\n\n  /**\n   * Bind a callback to an event of the audio.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind (event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = []\n    }\n\n    this.events[event].push(callback)\n\n    return this\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind (event) {\n    if (this.events[event]) {\n      delete this.events[event]\n    }\n\n    return this\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger (event) {\n    if (this.events[event]) {\n      this.events[event].forEach((callback) => callback())\n    }\n\n    return this\n  }\n}\n\nexport default Adapter\n","import Flash from \"streamer/adapter/flash\"\nimport WebAudio from \"streamer/adapter/web-audio\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Stream {\n  /**\n   * Detect support for different APIs and return the appropriate audio\n   * adapter.\n   *\n   * This enables easy access to the different adapters:\n   *\n   *   new Streamer.Adapter(source)\n   *\n   * @return {Adapter} The Adapter constructor for the supported API.\n   */\n  static get Adapter () {\n    if (window.AudioContext) {\n      return WebAudio\n    }\n    else {\n      return Flash\n    }\n  }\n\n  /**\n   * Initialize a stream.\n   *\n   * @param {Object} source The <audio> source element.\n   * @constructor\n   */\n  constructor (source) {\n    this.audio = new Stream.Adapter(source)\n  }\n\n  /**\n   * Get the audio signal.\n   *\n   * @type {Array}\n   */\n  get signal () {\n    return this.audio.signal\n  }\n\n  /**\n   * Is the stream playing?\n   *\n   * @type {Boolean}\n   */\n  get playing () {\n    return this.audio.playing\n  }\n\n  /**\n   * Start playing the stream.\n   */\n  play () {\n    this.audio.play()\n  }\n\n  /**\n   * Pause the stream.\n   */\n  pause () {\n    this.audio.pause()\n  }\n\n  /**\n   * Bind a callback to an event of the stream.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind (event, callback) {\n    this.audio.bind(event, callback)\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind (event) {\n    this.audio.unbind(event)\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger (event) {\n    this.audio.trigger(event)\n  }\n}\n\nexport default Stream\n","import $ from \"jquery\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Waveform {\n  /**\n   * Initialize a waveform.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Stream}            stream  The stream to use for constructing the\n   *                                    waveform.\n   * @param {Object}            options Configuration options.\n   * @constructor\n   */\n  constructor (canvas, stream, options) {\n    let ratio = this.ratio(canvas)\n      , draw = () => {\n          this.draw(stream.signal, canvas, ratio, options)\n        }\n      , scale = () => {\n          this.scale(canvas, ratio)\n          draw()\n        }\n\n    scale()\n    $(window).on(\"resize\", () => scale())\n    stream.bind(\"update\", () => draw())\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {HTMLCanvasElement} canvas  The canvas for which to calculate the\n   *                                      pixel ratio.\n   * @return  {Number}                    The canvas pixel ratio.\n   */\n  ratio (canvas) {\n    let context = canvas.getContext(\"2d\")\n      , devicePixelRatio = window.devicePixelRatio || 1\n      , backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n\n    return devicePixelRatio / backingStoreRatio\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas to scale.\n   * @param {Number}            ratio   The ratio with which to scale the\n   *                                    canvas.\n   */\n  scale (canvas, ratio) {\n    let ctx = canvas.getContext(\"2d\")\n      , $canvas = $(canvas)\n\n    if (ratio !== 1) {\n      let width = $canvas.width()\n        , height = $canvas.height()\n\n      canvas.width = width * ratio\n      canvas.height = height * ratio\n\n      ctx.scale(ratio, ratio)\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}             signal  The waveform signal to draw.\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Number}            ratio   The pixel ratio to draw at.\n   * @param {Object}            options Configuration options.\n   */\n  draw (signal, canvas, ratio, options) {\n    let ctx = canvas.getContext(\"2d\")\n      , w = canvas.width\n      , h = canvas.height\n      , r = ratio\n\n    options = options || {}\n\n    ctx.lineWidth = options.stroke.width\n    ctx.strokeStyle = options.stroke.color\n\n    ctx.clearRect(0, 0, w, h)\n    ctx.beginPath()\n\n    for (let i = 0, l = signal.length; i < l; i++) {\n      ctx.lineTo(i * (w / l), (h / (2 * r)) + signal[i] * (h / (2 * r)))\n    }\n\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n\nexport default Waveform\n","import $ from \"jquery\"\n\nimport Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Flash extends Adapter {\n  /**\n   * The paths to the Sound Manager libraries.\n   *\n   * @type {Object}\n   */\n  static get soundManagerPath () {\n    return {\n      js: \"lib/soundmanager2.js\"\n    , swf: \"lib/soundmanager2.swf\"\n    }\n  }\n\n  /**\n   * Load the Sound Manager libraries.\n   *\n   * @param {Function} done The callback to invoke once the loading has\n   *                        finished.\n   */\n  static loadSoundManager (done) {\n    window.SM2_DEFER = true\n\n    $.ajax({\n      dataType: \"script\"\n    , cache: true\n    , url: Flash.soundManagerPath.js\n    , success: () => {\n        require([\"SoundManager\"], (lib) => {\n          let { SoundManager } = lib\n\n          if (!Flash.soundManager) {\n            Flash.soundManager = new SoundManager()\n\n            $.extend(true, Flash.soundManager, {\n              flashVersion: 9\n            , flash9Options: {\n                useWaveformData: true\n              }\n            , preferFlash: true\n            , useHTML5Audio: false\n            , useWaveformData: true\n            , useHighPerformance: true\n            , useFastPolling: true\n            , multiShot: false\n            , debugMode: false\n            , debugFlash: false\n            , url: Flash.soundManagerPath.swf\n            })\n\n            Flash.soundManager.beginDelayedInit()\n          }\n\n          // Expose the Sound Manager instance globally so that Flash can attach\n          // to it.\n          window.soundManager = Flash.soundManager\n\n          Flash.soundManager.onready(() => done())\n        })\n      }\n    })\n  }\n\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 1024\n  }\n\n  /**\n   * Audio sample rate.\n   *\n   * @type {Number}\n   */\n  get sampleRate () {\n    return 44100\n  }\n\n  /**\n   * Initialize a flash adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    this.source = source\n\n    let path = this.source.src || $(this.source).find(\n      \"source[src$=mp3], source[src$=mp4], source[src$=m4a]\"\n    )[0].src\n\n    this.wave_L = []\n    this.wave_R = []\n    this.signal = new Float32Array(this.sampleSize)\n\n    Flash.loadSoundManager(() => {\n      this.audio = Flash.soundManager.createSound({\n        url: path\n      , stream: true\n      , autoLoad: true\n      , whileplaying: () => {\n          this.update()\n        }\n      , whileloading: () => {\n          this.progress = this.bytesLoaded / this.bytesTotal\n        }\n      , onload: () => {\n          this.loaded = true\n          this.progress = 1\n          this.trigger(\"loaded\")\n        }\n      , onplay: () => this.play()\n      , onresume: () => this.play()\n      , onpause: () => this.pause()\n      , onfinish: () => this.pause()\n      })\n    })\n  }\n\n  /**\n   * Executed when audio is processed by Sound Manager.\n   */\n  update () {\n    if (!this.loaded && !this.playing) {\n      return\n    }\n\n    this.wave_L = this.audio.waveformData.left;\n    this.wave_R = this.audio.waveformData.right;\n\n    let avg;\n\n    for (let i = 0, j = this.wave_L.length; i < j; i++) {\n      avg = parseFloat(this.wave_L[i]) + parseFloat(this.wave_R[i]);\n\n      this.signal[2 * i] = avg / 2;\n      this.signal[i * 2 + 1] = avg / 2;\n    }\n\n    super.update()\n  }\n}\n\nexport default Flash\n","import Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass WebAudio extends Adapter {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 2048\n  }\n\n  /**\n   * Initialize Web Audio adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    let { AudioContext } = window\n\n    this.context = new AudioContext()\n\n    this.audio = source\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    )\n\n    this.processor.onaudioprocess = (e) => this.update(e)\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode\n    }\n\n    this.gain = this.context.createGain()\n\n    this.signal = new Float32Array(this.sampleSize / 2)\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect()\n    }\n    else {\n      this.connect()\n    }\n\n    this.audio.onprogress = (e) => {\n      let target = e.currentTarget\n\n      if (target.duration) {\n        this.progress = target.seekable.end(0) / target.duration\n      }\n    }\n\n    this.audio.onplaying = () => this.play()\n    this.audio.onpause = () => this.pause()\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update (e) {\n    if (!this.loaded || !this.playing) return\n\n    let buffers = []\n      , channels = e.inputBuffer.numberOfChannels\n      , resolution = this.sampleSize / channels\n\n    for (let i = channels; i--;) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce((prev, curr) => {\n          return prev[i] + curr[i]\n        }) / channels\n      }\n      else {\n        this.signal[i] = buffers[0][i]\n      }\n    }\n\n    super.update()\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect () {\n    this.source = this.context.createMediaElementSource(this.audio)\n\n    this.source.connect(this.processor)\n    this.source.connect(this.gain)\n    this.gain.connect(this.context.destination)\n    this.processor.connect(this.context.destination)\n\n    this.loaded = true\n    this.progress = 1\n    this.trigger(\"loaded\")\n  }\n}\n\nexport default WebAudio\n"],"sourceRoot":"/src/js"}