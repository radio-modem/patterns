{"version":3,"sources":["modem.js","streamer.js","streamer/adapter.js","streamer/stream.js","streamer/waveform.js","streamer/adapter/flash.js","streamer/adapter/web-audio.js"],"names":["global","factory","define","amd","exports","require","mod","$","Streamer","modem","this","_jquery","_streamer","_interopRequire","obj","__esModule","_$","_Streamer","fn","streamer","options","each","index","element","undefined","data","module","Stream","Waveform","_streamerStream","_streamerWaveform","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_Stream","_Waveform","_this","extend","defaults","classes","icons","labels","audio","$audio","stream","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","aria-label","play","$icon","icon","bind","attr","pause","removeClass","addClass","on","playing","autoplay","waveform","stroke","get","width","color","streamerAdapter","Adapter","loaded","progress","events","value","trigger","event","callback","push","forEach","Flash","WebAudio","streamerStream","_streamerAdapterFlash","_streamerAdapterWebAudio","_Flash","_WebAudio","source","signal","unbind","window","AudioContext","streamerWaveform","canvas","ratio","draw","scale","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ctx","height","w","h","r","lineWidth","strokeStyle","clearRect","beginPath","l","lineTo","closePath","streamerAdapterFlash","_streamerAdapter","_get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","call","_inherits","subClass","superClass","create","constructor","__proto__","_Adapter2","_Adapter","path","src","find","wave_L","wave_R","Float32Array","sampleSize","loadSoundManager","soundManager","createSound","url","autoLoad","whileplaying","update","whileloading","bytesLoaded","bytesTotal","onload","onplay","onresume","onpause","onfinish","waveformData","left","right","avg","j","parseFloat","js","swf","done","SM2_DEFER","ajax","dataType","cache","soundManagerPath","success","lib","SoundManager","flashVersion","flash9Options","useWaveformData","preferFlash","useHTML5Audio","useHighPerformance","useFastPolling","multiShot","debugMode","debugFlash","beginDelayedInit","onready","streamerAdapterWebAudio","createScriptProcessor","createJavascriptNode","processor","onaudioprocess","e","createGain","createGainNode","gain","readyState","oncanplay","connect","onprogress","currentTarget","duration","seekable","end","onplaying","_this2","buffers","channels","inputBuffer","numberOfChannels","resolution","getChannelData","_loop","reduce","prev","curr","createMediaElementSource","destination"],"mappings":"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","file":"modem.js","sourcesContent":["import $ from \"jquery\"\nimport Streamer from \"streamer\"\n\n// Expose the Streamer as a jQuery plugin.\n$.fn.streamer = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, \"streamer\") === undefined) {\n      $.data(element, \"streamer\", new Streamer(element, options))\n    }\n  })\n}\n\n$(\"[data-streamer]\").streamer()\n","import $ from \"jquery\";\n\nimport Stream from \"streamer/stream\"\nimport Waveform from \"streamer/waveform\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {Object}\n   */\n  get defaults () {\n    return {\n      stroke: {\n        width: 2\n      , color: \"#666\"\n      }\n    , classes: {\n        wrapper: \"streamer\"\n      , button: \"streamer-button\"\n      , icon: \"streamer-icon\"\n      }\n    , icons: {\n        play: \"ion-play\"\n      , pause: \"ion-pause\"\n      }\n    , labels: {\n        play: \"Continue playing\"\n      , pause: \"Stop playing\"\n      }\n    }\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {Audio}   element The <audio> element to attach the Streamer to.\n   * @param {Object}  options Custom configuration options.\n   */\n  constructor (element, options) {\n    this.options = $.extend(this.defaults, options)\n\n    let classes = this.options.classes\n      , icons = this.options.icons\n      , labels = this.options.labels\n\n    this.audio = element\n    this.$audio = $(this.audio)\n\n    this.stream = new Stream(this.audio)\n\n    this.$audio.wrap($(\"<div />\", {\n      \"class\": classes.wrapper\n    }))\n\n    this.$wrapper = this.$audio.parent()\n\n    this.$canvas = $(\"<canvas />\")\n    this.$wrapper.append(this.$canvas)\n\n    this.$button = $(\"<button />\", {\n      \"class\": classes.button\n    , \"type\": \"button\"\n    , \"aria-label\": labels.play\n    })\n    this.$wrapper.append(this.$button)\n\n    this.$icon = $(\"<span />\", {\n      \"class\": `${classes.icon} ${classes.icon}-play ${icons.play}`\n    })\n    this.$button.append(this.$icon)\n\n    this.stream.bind(\"play\", () => {\n      this.$button.attr(\"aria-label\", labels.pause)\n      this.$icon.removeClass(`${classes.icon}-play ${icons.play}`)\n      this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$wrapper.addClass(\"is-playing\")\n    })\n\n    this.stream.bind(\"pause\", () => {\n      this.$button.attr(\"aria-label\", labels.play)\n      this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$icon.addClass(`${classes.icon}-play ${icons.play}`)\n      this.$wrapper.removeClass(\"is-playing\")\n    })\n\n    this.$button.on(\"click\", () => {\n      this.stream.playing ? this.stream.pause() : this.stream.play()\n    })\n\n    if (element.autoplay) this.stream.play()\n\n    this.waveform = new Waveform(this.$canvas[0], this.stream, {\n      stroke: this.options.stroke\n    })\n  }\n}\n\nexport default Streamer;\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Adapter {\n  /**\n   * Initialize an audio adapter.\n   *\n   * @constructor\n   */\n  constructor () {\n    this.loaded = false\n    this.progress = 0\n    this.events = {}\n  }\n\n  /**\n   * Start playing the audio.\n   */\n  play () {\n    if (this.playing) return\n\n    this.playing = true\n    this.trigger(\"play\")\n    this.audio.play()\n  }\n\n  /**\n   * Pause the audio.\n   */\n  pause () {\n    if (!this.playing) return\n\n    this.playing = false\n    this.trigger(\"pause\")\n    this.audio.pause()\n  }\n\n  /**\n   * Trigger an update of the audio.\n   */\n  update () {\n    this.trigger(\"update\")\n  }\n\n  /**\n   * Bind a callback to an event of the audio.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind (event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = []\n    }\n\n    this.events[event].push(callback)\n\n    return this\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind (event) {\n    if (this.events[event]) {\n      delete this.events[event]\n    }\n\n    return this\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger (event) {\n    if (this.events[event]) {\n      this.events[event].forEach((callback) => callback())\n    }\n\n    return this\n  }\n}\n\nexport default Adapter\n","import Flash from \"streamer/adapter/flash\"\nimport WebAudio from \"streamer/adapter/web-audio\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Stream {\n  /**\n   * Detect support for different APIs and return the appropriate audio\n   * adapter.\n   *\n   * This enables easy access to the different adapters:\n   *\n   *   new Streamer.Adapter(source)\n   *\n   * @return {Adapter} The Adapter constructor for the supported API.\n   */\n  static get Adapter () {\n    if (window.AudioContext) {\n      return WebAudio\n    }\n    else {\n      return Flash\n    }\n  }\n\n  /**\n   * Initialize a stream.\n   *\n   * @param {Object} source The <audio> source element.\n   * @constructor\n   */\n  constructor (source) {\n    this.audio = new Stream.Adapter(source)\n  }\n\n  /**\n   * Get the audio signal.\n   *\n   * @type {Array}\n   */\n  get signal () {\n    return this.audio.signal\n  }\n\n  /**\n   * Is the stream playing?\n   *\n   * @type {Boolean}\n   */\n  get playing () {\n    return this.audio.playing\n  }\n\n  /**\n   * Start playing the stream.\n   */\n  play () {\n    this.audio.play()\n  }\n\n  /**\n   * Pause the stream.\n   */\n  pause () {\n    this.audio.pause()\n  }\n\n  /**\n   * Bind a callback to an event of the stream.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind (event, callback) {\n    this.audio.bind(event, callback)\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind (event) {\n    this.audio.unbind(event)\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger (event) {\n    this.audio.trigger(event)\n  }\n}\n\nexport default Stream\n","import $ from \"jquery\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Waveform {\n  /**\n   * Initialize a waveform.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Stream}            stream  The stream to use for constructing the\n   *                                    waveform.\n   * @param {Object}            options Configuration options.\n   * @constructor\n   */\n  constructor (canvas, stream, options) {\n    let ratio = this.ratio(canvas)\n      , draw = () => {\n          this.draw(stream.signal, canvas, ratio, options)\n        }\n      , scale = () => {\n          this.scale(canvas, ratio)\n          draw()\n        }\n\n    scale()\n    $(window).on(\"resize\", () => scale())\n    stream.bind(\"update\", () => draw())\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {HTMLCanvasElement} canvas  The canvas for which to calculate the\n   *                                      pixel ratio.\n   * @return  {Number}                    The canvas pixel ratio.\n   */\n  ratio (canvas) {\n    let context = canvas.getContext(\"2d\")\n      , devicePixelRatio = window.devicePixelRatio || 1\n      , backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n\n    return devicePixelRatio / backingStoreRatio\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas to scale.\n   * @param {Number}            ratio   The ratio with which to scale the\n   *                                    canvas.\n   */\n  scale (canvas, ratio) {\n    let ctx = canvas.getContext(\"2d\")\n      , $canvas = $(canvas)\n\n    if (ratio !== 1) {\n      let width = $canvas.width()\n        , height = $canvas.height()\n\n      canvas.width = width * ratio\n      canvas.height = height * ratio\n\n      ctx.scale(ratio, ratio)\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}             signal  The waveform signal to draw.\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Number}            ratio   The pixel ratio to draw at.\n   * @param {Object}            options Configuration options.\n   */\n  draw (signal, canvas, ratio, options) {\n    let ctx = canvas.getContext(\"2d\")\n      , w = canvas.width\n      , h = canvas.height\n      , r = ratio\n\n    options = options || {}\n\n    ctx.lineWidth = options.stroke.width\n    ctx.strokeStyle = options.stroke.color\n\n    ctx.clearRect(0, 0, w, h)\n    ctx.beginPath()\n\n    for (let i = 0, l = signal.length; i < l; i++) {\n      ctx.lineTo(i * (w / l), (h / (2 * r)) + signal[i] * (h / (2 * r)))\n    }\n\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n\nexport default Waveform\n","import $ from \"jquery\"\n\nimport Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Flash extends Adapter {\n  /**\n   * The paths to the Sound Manager libraries.\n   *\n   * @type {Object}\n   */\n  static get soundManagerPath () {\n    return {\n      js: \"lib/soundmanager2.js\"\n    , swf: \"lib/soundmanager2.swf\"\n    }\n  }\n\n  /**\n   * Load the Sound Manager libraries.\n   *\n   * @param {Function} done The callback to invoke once the loading has\n   *                        finished.\n   */\n  static loadSoundManager (done) {\n    window.SM2_DEFER = true\n\n    $.ajax({\n      dataType: \"script\"\n    , cache: true\n    , url: Flash.soundManagerPath.js\n    , success: () => {\n        require([\"SoundManager\"], (lib) => {\n          let { SoundManager } = lib\n\n          if (!Flash.soundManager) {\n            Flash.soundManager = new SoundManager()\n\n            $.extend(true, Flash.soundManager, {\n              flashVersion: 9\n            , flash9Options: {\n                useWaveformData: true\n              }\n            , preferFlash: true\n            , useHTML5Audio: false\n            , useWaveformData: true\n            , useHighPerformance: true\n            , useFastPolling: true\n            , multiShot: false\n            , debugMode: false\n            , debugFlash: false\n            , url: Flash.soundManagerPath.swf\n            })\n\n            Flash.soundManager.beginDelayedInit()\n          }\n\n          // Expose the Sound Manager instance globally so that Flash can attach\n          // to it.\n          window.soundManager = Flash.soundManager\n\n          Flash.soundManager.onready(() => done())\n        })\n      }\n    })\n  }\n\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 1024\n  }\n\n  /**\n   * Audio sample rate.\n   *\n   * @type {Number}\n   */\n  get sampleRate () {\n    return 44100\n  }\n\n  /**\n   * Initialize a flash adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    this.source = source\n\n    let path = this.source.src || $(this.source).find(\n      \"source[src$=mp3], source[src$=mp4], source[src$=m4a]\"\n    )[0].src\n\n    this.wave_L = []\n    this.wave_R = []\n    this.signal = new Float32Array(this.sampleSize)\n\n    Flash.loadSoundManager(() => {\n      this.audio = Flash.soundManager.createSound({\n        url: path\n      , stream: true\n      , autoLoad: true\n      , whileplaying: () => {\n          this.update()\n        }\n      , whileloading: () => {\n          this.progress = this.bytesLoaded / this.bytesTotal\n        }\n      , onload: () => {\n          this.loaded = true\n          this.progress = 1\n          this.trigger(\"loaded\")\n        }\n      , onplay: () => this.play()\n      , onresume: () => this.play()\n      , onpause: () => this.pause()\n      , onfinish: () => this.pause()\n      })\n    })\n  }\n\n  /**\n   * Executed when audio is processed by Sound Manager.\n   */\n  update () {\n    if (!this.loaded && !this.playing) {\n      return\n    }\n\n    this.wave_L = this.audio.waveformData.left;\n    this.wave_R = this.audio.waveformData.right;\n\n    let avg;\n\n    for (let i = 0, j = this.wave_L.length; i < j; i++) {\n      avg = parseFloat(this.wave_L[i]) + parseFloat(this.wave_R[i]);\n\n      this.signal[2 * i] = avg / 2;\n      this.signal[i * 2 + 1] = avg / 2;\n    }\n\n    super.update()\n  }\n}\n\nexport default Flash\n","import Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass WebAudio extends Adapter {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 2048\n  }\n\n  /**\n   * Initialize Web Audio adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    let { AudioContext } = window\n\n    this.context = new AudioContext()\n\n    this.audio = source\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    )\n\n    this.processor.onaudioprocess = (e) => this.update(e)\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode\n    }\n\n    this.gain = this.context.createGain()\n\n    this.signal = new Float32Array(this.sampleSize / 2)\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect()\n    }\n    else {\n      this.connect()\n    }\n\n    this.audio.onprogress = (e) => {\n      let target = e.currentTarget\n\n      if (target.duration) {\n        this.progress = target.seekable.end(0) / target.duration\n      }\n    }\n\n    this.audio.onplaying = () => this.play()\n    this.audio.onpause = () => this.pause()\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update (e) {\n    if (!this.loaded || !this.playing) return\n\n    let buffers = []\n      , channels = e.inputBuffer.numberOfChannels\n      , resolution = this.sampleSize / channels\n\n    for (let i = channels; i--;) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce((prev, curr) => {\n          return prev[i] + curr[i]\n        }) / channels\n      }\n      else {\n        this.signal[i] = buffers[0][i]\n      }\n    }\n\n    super.update()\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect () {\n    this.source = this.context.createMediaElementSource(this.audio)\n\n    this.source.connect(this.processor)\n    this.source.connect(this.gain)\n    this.gain.connect(this.context.destination)\n    this.processor.connect(this.context.destination)\n\n    this.loaded = true\n    this.progress = 1\n    this.trigger(\"loaded\")\n  }\n}\n\nexport default WebAudio\n"],"sourceRoot":"/src/js"}