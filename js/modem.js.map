{"version":3,"sources":["modem.js","slide-in.js","streamer.js","waveform.js","web-audio.js"],"names":["global","factory","define","amd","exports","require","mod","$","Streamer","SlideIn","modem","this","_jquery","_streamer","_slideIn","_interopRequireDefault","obj","__esModule","default","_$","_Streamer","_SlideIn","fn","streamer","options","each","index","element","undefined","data","slideIn","module","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_this","extend","defaults","$element","classes","$close","find","$toggle","attr","on","hasClass","open","hide","show","get","value","addClass","removeClass","WebAudio","Waveform","_webAudio","_waveform","_WebAudio","_Waveform","addEventListener","e","onError","_options","icons","labels","audio","$audio","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","aria-label","play","$icon","icon","bind","onPlay","onPause","onButtonClick","autoplay","waveform","pause","error","_options2","_options3","load","playing","canvas","stream","ratio","draw","signal","scale","window","stroke","width","color","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ctx","height","w","h","r","l","lineWidth","strokeStyle","clearRect","beginPath","lineTo","closePath","webAudio","source","loaded","events","AudioContext","webkitAudioContext","createScriptProcessor","createJavascriptNode","processor","sampleSize","onaudioprocess","update","createGain","createGainNode","gain","Float32Array","readyState","oncanplay","connect","onplaying","onpause","_this2","buffers","channels","inputBuffer","numberOfChannels","resolution","push","getChannelData","_loop","reduce","prev","curr","trigger","createMediaElementSource","destination","event","callback","Reflect","deleteProperty","forEach"],"mappings":"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","file":"modem.js","sourcesContent":["import $ from 'jquery';\nimport Streamer from 'streamer';\nimport SlideIn from 'slide-in';\n\n// Expose the Streamer as a jQuery plugin.\n$.fn.streamer = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, 'streamer') === undefined) {\n      $.data(element, 'streamer', new Streamer(element, options));\n    }\n  });\n};\n\n$('[data-streamer]').streamer();\n\n$.fn.slideIn = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, 'slide-in') === undefined) {\n      $.data(element, 'slide-in', new SlideIn(element, options));\n    }\n  });\n};\n\n$('[data-slide-in]').slideIn();\n","import $ from 'jquery';\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class SlideIn {\n  /**\n   * Default Slide In options.\n   *\n   * @type {Object}\n   */\n  get defaults() {\n    return {\n      classes: {\n        open: 'is-open'\n      }\n    };\n  }\n\n  /**\n   * Initialize a Slide In.\n   *\n   * @param {Object} element The element to attach the Slide In to.\n   * @param {Object} options Custom configuration options.\n   */\n  constructor(element, options) {\n    this.options = $.extend(this.defaults, options);\n\n    this.$element = $(element);\n\n    const classes = this.options.classes;\n    const $close = this.$element.find('[data-slide-in-close]');\n    const $toggle = $(`[data-slide-in-toggle=${this.$element.attr('id')}]`);\n\n    $toggle.on('click', () => {\n      if (this.$element.hasClass(classes.open)) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    });\n\n    $close.on('click', () => {\n      if (this.$element.hasClass(classes.open)) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    });\n  }\n\n  /**\n   * Show the Slide In.\n   */\n  show() {\n    this.$element.addClass(this.options.classes.open);\n  }\n\n  /**\n   * Hide the Slide In.\n   */\n  hide() {\n    this.$element.removeClass(this.options.classes.open);\n  }\n}\n","import $ from 'jquery';\nimport WebAudio from 'web-audio';\nimport Waveform from 'waveform';\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {Object}\n   */\n  static get defaults() {\n    return {\n      classes: {\n        wrapper: 'streamer',\n        button: 'streamer-button',\n        icon: 'streamer-icon'\n      },\n      icons: {\n        play: 'ion-play',\n        pause: 'ion-pause',\n        error: 'ion-alert'\n      },\n      labels: {\n        play: 'Continue playing',\n        pause: 'Stop playing'\n      }\n    };\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {Audio}   element The <audio> element to attach the Streamer to.\n   * @param {Object}  options Custom configuration options.\n   */\n  constructor(element, options) {\n    this.options = $.extend(Streamer.defaults, options);\n\n    element.addEventListener('error', e => this.onError(e), true);\n\n    const {classes, icons, labels} = this.options;\n\n    this.audio = new WebAudio(element);\n    this.$audio = $(element);\n\n    this.$audio.wrap($('<div />', {\n      class: classes.wrapper\n    }));\n\n    this.$wrapper = this.$audio.parent();\n    this.$canvas = $('<canvas />');\n    this.$wrapper.append(this.$canvas);\n\n    this.$button = $('<button />', {\n      'class': classes.button,\n      'type': 'button',\n      'aria-label': labels.play\n    });\n    this.$wrapper.append(this.$button);\n\n    this.$icon = $('<span />', {\n      class: `${classes.icon} ${classes.icon}-play ${icons.play}`\n    });\n    this.$button.append(this.$icon);\n\n    this.audio.bind('play', () => this.onPlay());\n    this.audio.bind('pause', () => this.onPause());\n    this.$button.on('click', () => this.onButtonClick());\n\n    if (element.autoplay) {\n      this.audio.play();\n    }\n\n    this.waveform = new Waveform(this.$canvas[0], this.audio, this.options.waveform);\n  }\n\n  onPlay() {\n    const {labels, icons, classes} = this.options;\n\n    this.$button.attr('aria-label', labels.pause);\n    this.$icon.removeClass(`${classes.icon}-play ${icons.play}`);\n    this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`);\n    this.$wrapper.addClass('is-playing');\n  }\n\n  onPause() {\n    const {labels, icons, classes} = this.options;\n\n    this.$button.attr('aria-label', labels.play);\n    this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`);\n    this.$icon.addClass(`${classes.icon}-play ${icons.play}`);\n    this.$wrapper.removeClass('is-playing');\n  }\n\n  onButtonClick() {\n    if (this.error) {\n      this.$audio[0].load();\n    }\n\n    if (this.audio.playing) {\n      this.audio.pause();\n    } else {\n      this.audio.play();\n    }\n  }\n\n  onError(e) {\n    this.error = e;\n    this.audio.pause();\n  }\n}\n","import $ from 'jquery';\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Waveform {\n  /**\n   * Default Waveform options.\n   *\n   * @type {Object}\n   */\n  static get defaults() {\n    return {\n      stroke: {\n        width: 2,\n        color: '#666'\n      }\n    };\n  }\n\n  /**\n   * Initialize a waveform.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the waveform.\n   * @param {Stream}            stream  The stream to use for constructing the waveform.\n   * @param {Object}            options Configuration options.\n   * @constructor\n   */\n  constructor(canvas, stream, options) {\n    this.options = $.extend(Waveform.defaults, options);\n\n    const ratio = this.ratio(canvas);\n    const draw = () => {\n      this.draw(stream.signal, canvas, ratio);\n    };\n    const scale = () => {\n      this.scale(canvas, ratio);\n      draw();\n    };\n\n    scale();\n    $(window).on('resize', () => scale());\n    stream.bind('update', () => draw());\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {HTMLCanvasElement} canvas  The canvas for which to calculate the\n   *                                      pixel ratio.\n   * @return  {Number}                    The canvas pixel ratio.\n   */\n  ratio(canvas) {\n    const context = canvas.getContext('2d');\n    const devicePixelRatio = window.devicePixelRatio || 1;\n    const backingStoreRatio =\n      context.webkitBackingStorePixelRatio ||\n      context.mozBackingStorePixelRatio ||\n      context.msBackingStorePixelRatio ||\n      context.oBackingStorePixelRatio ||\n      context.backingStorePixelRatio ||\n      1;\n\n    return devicePixelRatio / backingStoreRatio;\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas to scale.\n   * @param {Number}            ratio   The ratio with which to scale the\n   *                                    canvas.\n   */\n  scale(canvas, ratio) {\n    const ctx = canvas.getContext('2d');\n    const $canvas = $(canvas);\n\n    if (ratio !== 1) {\n      const width = $canvas.width();\n      const height = $canvas.height();\n\n      canvas.width = width * ratio;\n      canvas.height = height * ratio;\n\n      ctx.scale(ratio, ratio);\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}             signal  The waveform signal to draw.\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Number}            ratio   The pixel ratio to draw at.\n   */\n  draw(signal, canvas, ratio) {\n    const ctx = canvas.getContext('2d');\n    const w = canvas.width;\n    const h = canvas.height;\n    const r = ratio;\n    const l = signal.length;\n\n    ctx.lineWidth = this.options.stroke.width;\n    ctx.strokeStyle = this.options.stroke.color;\n\n    ctx.clearRect(0, 0, w, h);\n    ctx.beginPath();\n\n    for (let i = 0; i < l; i++) {\n      ctx.lineTo(i * (w / l), h / (2 * r) + signal[i] * (h / (2 * r)));\n    }\n\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class WebAudio {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize() {\n    return 2048;\n  }\n\n  /**\n   * Initialize web audio.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor(source) {\n    this.loaded = false;\n    this.events = {};\n\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n\n    this.context = new AudioContext();\n    this.audio = source;\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode;\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    );\n\n    this.processor.onaudioprocess = e => this.update(e);\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode;\n    }\n\n    this.gain = this.context.createGain();\n    this.signal = new Float32Array(this.sampleSize / 2);\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect();\n    } else {\n      this.connect();\n    }\n\n    this.audio.onplaying = () => this.play();\n    this.audio.onpause = () => this.pause();\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update(e) {\n    if (!this.loaded || !this.playing) {\n      return;\n    }\n\n    const buffers = [];\n    const channels = e.inputBuffer.numberOfChannels;\n    const resolution = this.sampleSize / channels;\n\n    for (let i = channels - 1; i >= 0; i--) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce((prev, curr) => prev[i] + curr[i]) / channels;\n      } else {\n        this.signal[i] = buffers[0][i];\n      }\n    }\n\n    this.trigger('update');\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect() {\n    this.source = this.context.createMediaElementSource(this.audio);\n    this.source.connect(this.processor);\n    this.source.connect(this.gain);\n\n    this.gain.connect(this.context.destination);\n    this.processor.connect(this.context.destination);\n\n    this.loaded = true;\n    this.trigger('loaded');\n  }\n\n  /**\n   * Start playing the audio.\n   */\n  play() {\n    if (this.playing || !this.audio) {\n      return;\n    }\n\n    this.playing = true;\n    this.trigger('play');\n    this.audio.play();\n  }\n\n  /**\n   * Pause the audio.\n   */\n  pause() {\n    if (!this.playing || !this.audio) {\n      return;\n    }\n\n    this.playing = false;\n    this.trigger('pause');\n    this.audio.pause();\n  }\n\n  /**\n   * Bind a callback to an event of the audio.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind(event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n\n    this.events[event].push(callback);\n\n    return this;\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind(event) {\n    if (this.events[event]) {\n      Reflect.deleteProperty(this.events[event]);\n    }\n\n    return this;\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger(event) {\n    if (this.events[event]) {\n      this.events[event].forEach(callback => callback());\n    }\n\n    return this;\n  }\n}\n"],"sourceRoot":"/src/js"}