{"version":3,"sources":["modem.js","streamer.js","streamer/adapter.js","streamer/stream.js","streamer/waveform.js","streamer/adapter/flash.js","streamer/adapter/web-audio.js"],"names":["factory","define","amd","exports","require","_jquery","_streamer","_interopRequire","obj","__esModule","$","Streamer","fn","streamer","options","this","each","undefined","data","module","_streamerStream","_streamerWaveform","_createClass","defineProperties","target","props","key","prop","configurable","value","writable","Object","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Stream","Waveform","element","_this","extend","defaults","classes","icons","audio","$audio","stream","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","$icon","icon","play","on","playing","pause","bind","removeClass","addClass","waveform","stroke","get","width","color","Adapter","loaded","progress","events","trigger","update","event","callback","push","unbind","forEach","_streamerAdapterFlash","_streamerAdapterWebAudio","Flash","WebAudio","source","signal","window","AudioContext","canvas","ratio","draw","scale","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","height","w","h","r","lineWidth","strokeStyle","clearRect","beginPath","i","l","length","lineTo","closePath","_streamerAdapter","_get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","call","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","_Adapter","path","src","find","wave_L","wave_R","Float32Array","sampleSize","loadSoundManager","soundManager","createSound","url","autoLoad","whileplaying","whileloading","bytesLoaded","bytesTotal","onload","onplay","onresume","onpause","onfinish","sampleRate","waveformData","left","right","avg","j","parseFloat","soundManagerPath","js","swf","done","SM2_DEFER","ajax","dataType","cache","success","lib","SoundManager","flashVersion","flash9Options","useWaveformData","preferFlash","useHTML5Audio","useHighPerformance","useFastPolling","multiShot","debugMode","debugFlash","beginDelayedInit","onready","createScriptProcessor","createJavascriptNode","processor","onaudioprocess","e","createGain","createGainNode","gain","readyState","oncanplay","connect","onprogress","currentTarget","duration","seekable","end","onplaying","buffers","channels","inputBuffer","numberOfChannels","resolution","getChannelData","reduce","prev","curr","createMediaElementSource","destination"],"mappings":"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","file":"modem.js","sourcesContent":["import $ from \"jquery\"\nimport Streamer from \"streamer\"\n\n$.fn.streamer = function (options) {\n  return this.each(function () {\n    if ($.data(this, \"streamer\") === undefined) {\n      $.data(this, \"streamer\", new Streamer(this, options))\n    }\n  })\n}\n\n$(\"[data-streamer]\").streamer()\n","import $ from \"jquery\";\n\nimport Stream from \"streamer/stream\"\nimport Waveform from \"streamer/waveform\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {object}\n   */\n  get defaults () {\n    return {\n      stroke: {\n        width: 2\n      , color: \"#666\"\n      }\n    , classes: {\n        wrapper: \"streamer\"\n      , button: \"streamer-button\"\n      , icon: \"streamer-icon\"\n      }\n    , icons: {\n        play: \"ion-play\"\n      , pause: \"ion-pause\"\n      }\n    }\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {object} element The <audio> element to attach the Streamer to.\n   * @param {object} options Custom configuration options.\n   */\n  constructor (element, options) {\n    this.options = $.extend(this.defaults, options)\n\n    let classes = this.options.classes\n    let icons = this.options.icons\n\n    this.audio = element\n    this.$audio = $(this.audio)\n\n    this.stream = new Stream(this.audio)\n\n    this.$audio.wrap($(\"<div />\", {\n      \"class\": classes.wrapper\n    }))\n\n    this.$wrapper = this.$audio.parent()\n\n    this.$canvas = $(\"<canvas />\")\n    this.$wrapper.append(this.$canvas)\n\n    this.$button = $(\"<button />\", {\n      \"class\": classes.button\n    , \"type\": \"button\"\n    })\n    this.$wrapper.append(this.$button)\n\n    this.$icon = $(\"<span />\", {\n      \"class\": `${classes.icon} ${classes.icon}-play ${icons.play}`\n    })\n    this.$button.append(this.$icon)\n\n    this.$button.on(\"click\", () => {\n      if (this.stream.playing) {\n        this.stream.pause()\n      }\n      else {\n        this.stream.play()\n      }\n    })\n\n    this.stream.bind(\"play\", () => {\n      this.$icon.removeClass(`${classes.icon}-play ${icons.play}`)\n      this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$wrapper.addClass(\"is-playing\")\n    })\n\n    this.stream.bind(\"pause\", () => {\n      this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`)\n      this.$icon.addClass(`${classes.icon}-play ${icons.play}`)\n      this.$wrapper.removeClass(\"is-playing\")\n    })\n\n    this.waveform = new Waveform(this.$canvas[0], this.stream, {\n      stroke: this.options.stroke\n    })\n  }\n}\n\nexport default Streamer;\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Adapter {\n  constructor () {\n    this.loaded = false\n    this.progress = 0\n    this.events = {}\n  }\n\n  play () {\n    if (this.playing) return\n\n    this.playing = true\n    this.trigger(\"play\")\n    this.audio.play()\n  }\n\n  pause () {\n    if (!this.playing) return\n\n    this.playing = false\n    this.trigger(\"pause\")\n    this.audio.pause()\n  }\n\n  update () {\n    this.trigger(\"update\")\n  }\n\n  bind (event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = []\n    }\n\n    this.events[event].push(callback)\n\n    return this\n  }\n\n  unbind (event) {\n    if (this.events[event]) {\n      delete this.events[event]\n    }\n\n    return this\n  }\n\n  trigger (event) {\n    if (this.events[event]) {\n      this.events[event].forEach((callback) => callback())\n    }\n\n    return this\n  }\n}\n\nexport default Adapter\n","import Flash from \"streamer/adapter/flash\"\nimport WebAudio from \"streamer/adapter/web-audio\"\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Stream {\n  /**\n   * Detect support for different APIs and return the appropriate audio\n   * adapter.\n   *\n   * This enables easy access to the different adapters:\n   *\n   *   new Streamer.Adapter(source)\n   *\n   * @return {Adapter} The Adapter constructor for the supported API.\n   */\n  static get Adapter () {\n    if (window.AudioContext) {\n      return WebAudio\n    }\n    else {\n      return Flash\n    }\n  }\n\n  /**\n   * @constructor\n   */\n  constructor (source) {\n    this.audio = new Stream.Adapter(source)\n  }\n\n  /**\n   * @type {Array}\n   */\n  get signal () {\n    return this.audio.signal\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get playing () {\n    return this.audio.playing\n  }\n\n  play () {\n    this.audio.play()\n  }\n\n  pause () {\n    this.audio.pause()\n  }\n\n  bind (event, callback) {\n    this.audio.bind(event, callback)\n  }\n\n  unbind (event) {\n    this.audio.unbind(event)\n  }\n\n  trigger (event) {\n    this.audio.trigger(event)\n  }\n}\n\nexport default Stream\n","import $ from \"jquery\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Waveform {\n  /**\n   * Initialize a waveform.\n   *\n   * @param {Object} canvas   The canvas on which to draw the waveform.\n   * @param {Stream} stream   The stream to use for constructing the waveform.\n   * @param {Object} options  Configuration options.\n   * @constructor\n   */\n  constructor (canvas, stream, options) {\n    let ratio = this.ratio(canvas)\n      , draw = () => {\n          this.draw(stream.signal, canvas, ratio, options)\n        }\n      , scale = () => {\n          this.scale(canvas, ratio)\n          draw()\n        }\n\n    scale()\n    $(window).on('resize', () => scale())\n    stream.bind('update', () => draw())\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {Object} canvas The canvas for which to calculate the pixel ratio.\n   * @return  {Number}        The canvas pixel ratio.\n   */\n  ratio (canvas) {\n    let context = canvas.getContext(\"2d\")\n      , devicePixelRatio = window.devicePixelRatio || 1\n      , backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1\n\n    return devicePixelRatio / backingStoreRatio\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {Number} ratio The ratio with which to scale the canvas.\n   */\n  scale (canvas, ratio) {\n    let context = canvas.getContext(\"2d\")\n      , $canvas = $(canvas)\n\n    if (ratio !== 1) {\n      let width = $canvas.width()\n        , height = $canvas.height()\n\n      canvas.width = width * ratio\n      canvas.height = height * ratio\n\n      context.scale(ratio, ratio)\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}   signal  The waveform signal to draw.\n   * @param {Object}  canvas  The canvas on which to draw the waveform.\n   * @param {Number}  ratio   The pixel ratio to draw at.\n   * @param {Object}  options Configuration options.\n   */\n  draw (signal, canvas, ratio, options) {\n    let context = canvas.getContext(\"2d\")\n      , w = canvas.width\n      , h = canvas.height\n      , r = ratio\n\n    options = options || {}\n\n    context.lineWidth = options.stroke.width\n    context.strokeStyle = options.stroke.color\n\n    context.clearRect(0, 0, w, h)\n    context.beginPath()\n\n    for (let i = 0, l = signal.length; i < l; i++) {\n      context.lineTo(i * (w / l), (h / (2 * r)) + signal[i] * (h / (2 * r)))\n    }\n\n    context.stroke();\n    context.closePath();\n  }\n}\n\nexport default Waveform\n","import $ from \"jquery\"\n\nimport Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass Flash extends Adapter {\n  static get soundManagerPath () {\n    return {\n      js: \"lib/soundmanager2.js\"\n    , swf: \"lib/soundmanager2.swf\"\n    }\n  }\n\n  static loadSoundManager (done) {\n    window.SM2_DEFER = true\n\n    $.ajax({\n      dataType: \"script\"\n    , cache: true\n    , url: Flash.soundManagerPath.js\n    , success: () => {\n        require([\"SoundManager\"], (lib) => {\n          let { SoundManager } = lib\n\n          if (!Flash.soundManager) {\n            Flash.soundManager = new SoundManager()\n\n            $.extend(true, Flash.soundManager, {\n              flashVersion: 9\n            , flash9Options: {\n                useWaveformData: true\n              }\n            , preferFlash: true\n            , useHTML5Audio: false\n            , useWaveformData: true\n            , useHighPerformance: true\n            , useFastPolling: true\n            , multiShot: false\n            , debugMode: false\n            , debugFlash: false\n            , url: Flash.soundManagerPath.swf\n            })\n\n            Flash.soundManager.beginDelayedInit()\n          }\n\n          // Expose the Sound Manager instance globally so that Flash can attach\n          // to it.\n          window.soundManager = Flash.soundManager\n\n          Flash.soundManager.onready(() => done())\n        })\n      }\n    })\n  }\n\n  get sampleSize () {\n    return 1024\n  }\n\n  get sampleRate () {\n    return 44100\n  }\n\n  constructor (source) {\n    super()\n\n    this.source = source\n\n    let path = this.source.src || $(this.source).find(\n      \"source[src$=mp3], source[src$=mp4], source[src$=m4a]\"\n    )[0].src\n\n    this.wave_L = []\n    this.wave_R = []\n    this.signal = new Float32Array(this.sampleSize)\n\n    Flash.loadSoundManager(() => {\n      this.audio = Flash.soundManager.createSound({\n        url: path\n      , stream: true\n      , autoLoad: true\n      , whileplaying: () => {\n          this.update()\n        }\n      , whileloading: () => {\n          this.progress = this.bytesLoaded / this.bytesTotal\n        }\n      , onload: () => {\n          this.loaded = true\n          this.progress = 1\n          this.trigger(\"loaded\")\n        }\n      , onplay: () => this.play()\n      , onresume: () => this.play()\n      , onpause: () => this.pause()\n      , onfinish: () => this.pause()\n      })\n    })\n  }\n\n  update () {\n    if (!this.loaded && !this.playing) {\n      return\n    }\n\n    this.wave_L = this.audio.waveformData.left;\n    this.wave_R = this.audio.waveformData.right;\n\n    let avg;\n\n    for (let i = 0, j = this.wave_L.length; i < j; i++) {\n      avg = parseFloat(this.wave_L[i]) + parseFloat(this.wave_R[i]);\n\n      this.signal[2 * i] = avg / 2;\n      this.signal[i * 2 + 1] = avg / 2;\n    }\n\n    super.update()\n  }\n}\n\nexport default Flash\n","import Adapter from \"streamer/adapter\"\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nclass WebAudio extends Adapter {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize () {\n    return 2048\n  }\n\n  /**\n   * Initialize Web Audio adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor (source) {\n    super()\n\n    let { AudioContext } = window\n\n    this.context = new AudioContext()\n\n    this.audio = source\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    )\n\n    this.processor.onaudioprocess = (e) => this.update(e)\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode\n    }\n\n    this.gain = this.context.createGain()\n\n    this.signal = new Float32Array(this.sampleSize / 2)\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect()\n    }\n    else {\n      this.connect()\n    }\n\n    this.audio.onprogress = (e) => {\n      let target = e.currentTarget\n\n      if (target.duration) {\n        this.progress = target.seekable.end(0) / target.duration\n      }\n    }\n\n    this.audio.onplaying = () => this.play()\n    this.audio.onpause = () => this.pause()\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update (e) {\n    if (!this.loaded || !this.playing) return\n\n    let buffers = []\n      , channels = e.inputBuffer.numberOfChannels\n      , resolution = this.sampleSize / channels\n\n    for (let i = channels; i--;) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce((prev, curr) => {\n          return prev[i] + curr[i]\n        }) / channels\n      }\n      else {\n        this.signal[i] = buffers[0][i]\n      }\n    }\n\n    super.update()\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect () {\n    this.source = this.context.createMediaElementSource(this.audio)\n\n    this.source.connect(this.processor)\n    this.source.connect(this.gain)\n    this.gain.connect(this.context.destination)\n    this.processor.connect(this.context.destination)\n\n    this.loaded = true\n    this.progress = 1\n    this.trigger(\"loaded\")\n  }\n}\n\nexport default WebAudio\n"],"sourceRoot":"/src/js"}