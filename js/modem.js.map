{"version":3,"sources":["modem.js","slide-in.js","streamer.js","streamer/adapter.js","streamer/stream.js","streamer/waveform.js","streamer/adapter/flash.js","streamer/adapter/web-audio.js"],"names":["global","factory","define","amd","exports","require","mod","$","Streamer","SlideIn","modem","this","_jquery","_streamer","_slideIn","_interopRequireDefault","obj","__esModule","default","_$","_Streamer","_SlideIn","fn","streamer","options","each","index","element","undefined","data","slideIn","module","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_this","extend","defaults","$element","classes","$close","find","$toggle","attr","on","hasClass","open","hide","show","get","value","addClass","removeClass","Stream","Waveform","_streamerStream","_streamerWaveform","_Stream","_Waveform","icons","labels","audio","stream","$audio","wrap","class","wrapper","$wrapper","parent","$canvas","append","$button","button","type","aria-label","play","$icon","icon","bind","pause","playing","autoplay","waveform","stroke","width","color","streamerAdapter","Adapter","loaded","progress","events","trigger","event","callback","push","Reflect","deleteProperty","forEach","Flash","WebAudio","streamerStream","_streamerAdapterFlash","_streamerAdapterWebAudio","_Flash","_WebAudio","source","signal","window","AudioContext","unbind","streamerWaveform","canvas","ratio","draw","scale","context","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ctx","height","w","h","r","lineWidth","strokeStyle","clearRect","beginPath","l","lineTo","closePath","streamerAdapterFlash","_streamerAdapter","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getter","call","getPrototypeOf","_Adapter2","_Adapter","path","src","waveL","waveR","Float32Array","sampleSize","loadSoundManager","soundManager","createSound","url","autoLoad","whileplaying","update","whileloading","bytesLoaded","bytesTotal","onload","onplay","onresume","onpause","onfinish","done","SM2_DEFER","ajax","dataType","cache","soundManagerPath","js","success","lib","SoundManager","flashVersion","flash9Options","useWaveformData","preferFlash","useHTML5Audio","useHighPerformance","useFastPolling","multiShot","debugMode","debugFlash","swf","beginDelayedInit","onready","waveformData","left","right","avg","j","wave_L","parseFloat","streamerAdapterWebAudio","createScriptProcessor","createJavascriptNode","processor","onaudioprocess","e","createGain","createGainNode","gain","readyState","oncanplay","connect","onprogress","currentTarget","duration","seekable","end","onplaying","_this2","buffers","channels","inputBuffer","numberOfChannels","resolution","getChannelData","_loop","reduce","prev","curr","createMediaElementSource","destination"],"mappings":"CAAA,SAAWA,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,SAAU,UAAW,SAAU,WAAY,YAAaD,OAC1D,IAAuB,mBAAZG,SAChBH,EAAQG,QAASC,QAAQ,UAAWA,QAAQ,YAAaA,QAAQ,iBAC5D,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASJ,EAAOO,EAAGP,EAAOQ,SAAUR,EAAOS,SACvDT,EAAOU,MAAQJ,EAAIF,UAEpBO,KAAM,SAAUP,EAASQ,EAASC,EAAWC,GAC9C,YAEA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,GAAIG,GAAKJ,EAAuBH,GAE5BQ,EAAYL,EAAuBF,GAEnCQ,EAAWN,EAAuBD,EAhBxCK,GAAA,WAAEG,GAAGC,SAAW,SAAUC,GACxB,MAAOb,MAAKc,KAAK,SAACC,EAAOC,GACaC,SAAhCT,EAAA,WAAEU,KAAKF,EAAS,aAClBR,EAAA,WAAEU,KAAKF,EAAS,WAAY,GAAAP,GAAA,WAAaO,EAASH,QAKxD,EAAAL,EAAA,YAAE,mBAAmBI,WAErBJ,EAAA,WAAEG,GAAGQ,QAAU,SAAUN,GACvB,MAAOb,MAAKc,KAAK,SAACC,EAAOC,GACaC,SAAhCT,EAAA,WAAEU,KAAKF,EAAS,aAClBR,EAAA,WAAEU,KAAKF,EAAS,WAAY,GAAAN,GAAA,WAAYM,EAASH,QAKvD,EAAAL,EAAA,YAAE,mBAAmBW,YAqBrB,SAAW9B,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,YAAa,UAAW,SAAU,UAAWD,OAC/C,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,eAC5B,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOO,GACjCP,EAAO8B,QAAUxB,EAAIF,UAEtBO,KAAM,SAAUP,EAAS2B,EAAQnB,GAClC,YAIA,SAASG,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAM7hBf,EAAKJ,EAAuBH,GC5DbH,EAAO,WAoBf,QApBQA,GAoBPkB,EAASH,GDwEjB,GAAI4B,GAAQzC,IAEZqB,GAAgBrB,KC9FDF,GAqBjBE,KAAKa,QAAUL,EAAA,WAAEkC,OAAO1C,KAAK2C,SAAU9B,GAEvCb,KAAK4C,UAAW,EAAApC,EAAA,YAAEQ,EAElB,IAAM6B,GAAU7C,KAAKa,QAAQgC,QACvBC,EAAS9C,KAAK4C,SAASG,KAAK,yBAC5BC,GAAU,EAAAxC,EAAA,YAAA,yBAA2BR,KAAK4C,SAASK,KAAK,MAAK,IAEnED,GAAQE,GAAG,QAAS,WACdT,EAAKG,SAASO,SAASN,EAAQO,MACjCX,EAAKY,OAELZ,EAAKa,SAITR,EAAOI,GAAG,QAAS,WACbT,EAAKG,SAASO,SAASN,EAAQO,MACjCX,EAAKY,OAELZ,EAAKa,SDoGT,MA1EA7B,GCnEiB3B,IDoEfuC,IAAK,WAOLkB,ICrEQ,WACV,OACEV,SACEO,KAAM,gBDoHV3B,EC7HiB3B,ID8HfuC,IAAK,OACLmB,MC9EA,WACFxD,KAAK4C,SAASa,SAASzD,KAAKa,QAAQgC,QAAQO,SDqF1Cf,IAAK,OACLmB,MChFA,WACFxD,KAAK4C,SAASc,YAAY1D,KAAKa,QAAQgC,QAAQO,UAzD9BtD,IDgJnBsB,GAAO3B,QChJYK,IDkJrB,SAAWT,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,YAAa,UAAW,SAAU,SAAU,kBAAmB,qBAAsBD,OACvF,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,UAAWA,QAAQ,mBAAoBA,QAAQ,0BAC3E,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOO,EAAGP,EAAOsE,OAAQtE,EAAOuE,UAC1DvE,EAAOuB,SAAWjB,EAAIF,UAEvBO,KAAM,SAAUP,EAAS2B,EAAQnB,EAAS4D,EAAiBC,GAC5D,YAIA,SAAS1D,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAM7hBf,EAAKJ,EAAuBH,GAE5B8D,EAAU3D,EAAuByD,GAEjCG,EAAY5D,EAAuB0D,GEzKpBjE,EAAQ,WAkChB,QAlCQA,GAkCPmB,EAASH,GFqLjB,GAAI4B,GAAQzC,IAEZqB,GAAgBrB,KEzNDH,GAmCjBG,KAAKa,QAAUL,EAAA,WAAEkC,OAAO1C,KAAK2C,SAAU9B,EAEvC,IAAMgC,GAAU7C,KAAKa,QAAQgC,QACvBoB,EAAQjE,KAAKa,QAAQoD,MACrBC,EAASlE,KAAKa,QAAQqD,MAE5BlE,MAAKmE,MAAQnD,EACbhB,KAAKoE,OAAS,GAAAL,GAAA,WAAW/D,KAAKmE,OAC9BnE,KAAKqE,QAAS,EAAA7D,EAAA,YAAER,KAAKmE,OAErBnE,KAAKqE,OAAOC,MAAK,EAAA9D,EAAA,YAAE,WACjB+D,QAAO1B,EAAQ2B,WAGjBxE,KAAKyE,SAAWzE,KAAKqE,OAAOK,SAC5B1E,KAAK2E,SAAU,EAAAnE,EAAA,YAAE,cACjBR,KAAKyE,SAASG,OAAO5E,KAAK2E,SAE1B3E,KAAK6E,SAAU,EAAArE,EAAA,YAAE,cACf+D,QAAS1B,EAAQiC,OACjBC,KAAQ,SACRC,aAAcd,EAAOe,OAEvBjF,KAAKyE,SAASG,OAAO5E,KAAK6E,SAE1B7E,KAAKkF,OAAQ,EAAA1E,EAAA,YAAE,YACb+D,QAAU1B,EAAQsC,KAAI,IAAItC,EAAQsC,KAAI,SAASlB,EAAMgB,OAEvDjF,KAAK6E,QAAQD,OAAO5E,KAAKkF,OAEzBlF,KAAKoE,OAAOgB,KAAK,OAAQ,WACvB3C,EAAKoC,QAAQ5B,KAAK,aAAciB,EAAOmB,OACvC5C,EAAKyC,MAAMxB,YAAeb,EAAQsC,KAAI,SAASlB,EAAMgB,MACrDxC,EAAKyC,MAAMzB,SAAYZ,EAAQsC,KAAI,UAAUlB,EAAMoB,OACnD5C,EAAKgC,SAAShB,SAAS,gBAGzBzD,KAAKoE,OAAOgB,KAAK,QAAS,WACxB3C,EAAKoC,QAAQ5B,KAAK,aAAciB,EAAOe,MACvCxC,EAAKyC,MAAMxB,YAAeb,EAAQsC,KAAI,UAAUlB,EAAMoB,OACtD5C,EAAKyC,MAAMzB,SAAYZ,EAAQsC,KAAI,SAASlB,EAAMgB,MAClDxC,EAAKgC,SAASf,YAAY,gBAG5B1D,KAAK6E,QAAQ3B,GAAG,QAAS,WACnBT,EAAK2B,OAAOkB,QACd7C,EAAK2B,OAAOiB,QAEZ5C,EAAK2B,OAAOa,SAIZjE,EAAQuE,UACVvF,KAAKoE,OAAOa,OAGdjF,KAAKwF,SAAW,GAAAxB,GAAA,WAAahE,KAAK2E,QAAQ,GAAI3E,KAAKoE,QACjDqB,OAAQzF,KAAKa,QAAQ4E,SF4LvB,MAxGAhE,GEhLiB5B,IFiLfwC,IAAK,WAOLkB,IElLQ,WACV,OACEkC,QACEC,MAAO,EACPC,MAAO,QAET9C,SACE2B,QAAS,WACTM,OAAQ,kBACRK,KAAM,iBAERlB,OACEgB,KAAM,WACNI,MAAO,aAETnB,QACEe,KAAM,mBACNI,MAAO,qBAvBMxF,IF2RnBuB,GAAO3B,QE3RYI,IF6RrB,SAAWR,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,oBAAqB,UAAW,UAAWD,OAC7C,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,YACZ,CACL,GAAIzB,IACFF,WAEFH,GAAQK,EAAIF,QAASE,GACrBN,EAAOuG,gBAAkBjG,EAAIF,UAE9BO,KAAM,SAAUP,EAAS2B,GAM1B,YAIA,SAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MGnT9gBsE,EAAO,WAMf,QANQA,KH+TfxE,EAAgBrB,KG/TD6F,GAOjB7F,KAAK8F,QAAS,EACd9F,KAAK+F,SAAW,EAChB/F,KAAKgG,UHwZL,MAvFAvE,GG1UiBoE,IH2UfxD,IAAK,OACLmB,MG7TA,YACExD,KAAKsF,SAAYtF,KAAKmE,QAI1BnE,KAAKsF,SAAU,EACftF,KAAKiG,QAAQ,QACbjG,KAAKmE,MAAMc,WHoUT5C,IAAK,QACLmB,MG/TC,WACExD,KAAKsF,SAAYtF,KAAKmE,QAI3BnE,KAAKsF,SAAU,EACftF,KAAKiG,QAAQ,SACbjG,KAAKmE,MAAMkB,YHsUThD,IAAK,SACLmB,MGjUE,WACJxD,KAAKiG,QAAQ,aH2UX5D,IAAK,OACLmB,MGnUA,SAAC0C,EAAOC,GAOV,MANKnG,MAAKgG,OAAOE,KACflG,KAAKgG,OAAOE,OAGdlG,KAAKgG,OAAOE,GAAOE,KAAKD,GAEjBnG,QH4ULqC,IAAK,SACLmB,MGrUE,SAAC0C,GAKL,MAJIlG,MAAKgG,OAAOE,IACdG,QAAQC,eAAetG,KAAKgG,OAAOE,IAG9BlG,QH8ULqC,IAAK,UACLmB,MGvUG,SAAC0C,GAKN,MAJIlG,MAAKgG,OAAOE,IACdlG,KAAKgG,OAAOE,GAAOK,QAAQ,SAAAJ,GHwUrB,MGxUiCA,OAGlCnG,SApFU6F,IHoanBzE,GAAO3B,QGpaYoG,IHsarB,SAAWxG,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,mBAAoB,UAAW,SAAU,yBAA0B,8BAA+BD,OACpG,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,0BAA2BA,QAAQ,mCAC/D,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOmH,MAAOnH,EAAOoH,UAC/CpH,EAAOqH,eAAiB/G,EAAIF,UAE7BO,KAAM,SAAUP,EAAS2B,EAAQuF,EAAuBC,GACzD,YAIA,SAASxG,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAM7hBsF,EAASzG,EAAuBuG,GAEhCG,EAAY1G,EAAuBwG,GI5bpBjD,EAAM,WA2Cd,QA3CQA,GA2CPoD,GJ4cR1F,EAAgBrB,KIvfD2D,GA4CjB3D,KAAKmE,MAAQ,GAAIR,GAAOkC,QAAQkB,GJsgBhC,MA/GAtF,GInciBkC,IJocftB,IAAK,SAOLkB,IInbM,WACR,MAAOvD,MAAKmE,MAAM6C,UJ4bhB3E,IAAK,UACLkB,IIrbO,WACT,MAAOvD,MAAKmE,MAAMmB,aJ+bhBjD,IAAK,UAYLkB,IIlec,WAChB,MAAI0D,QAAOC,aACTJ,EAAA,WAGFD,EAAA,eJgfApF,EIhgBiBkC,IJigBftB,IAAK,OACLmB,MIhdA,WACFxD,KAAKmE,MAAMc,UJudT5C,IAAK,QACLmB,MIldC,WACHxD,KAAKmE,MAAMkB,WJ4dThD,IAAK,OACLmB,MIpdA,SAAC0C,EAAOC,GACVnG,KAAKmE,MAAMiB,KAAKc,EAAOC,MJ6drB9D,IAAK,SACLmB,MItdE,SAAC0C,GACLlG,KAAKmE,MAAMgD,OAAOjB,MJ+dhB7D,IAAK,UACLmB,MIxdG,SAAC0C,GACNlG,KAAKmE,MAAM8B,QAAQC,OAtFFvC,IJqjBnBvC,GAAO3B,QIrjBYkE,IJujBrB,SAAWtE,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,qBAAsB,UAAW,SAAU,UAAWD,OACxD,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,eAC5B,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOO,GACjCP,EAAO+H,iBAAmBzH,EAAIF,UAE/BO,KAAM,SAAUP,EAAS2B,EAAQnB,GAClC,YAIA,SAASG,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAM7hBf,EAAKJ,EAAuBH,GK3kBb2D,EAAQ,WAShB,QATQA,GASPyD,EAAQjD,EAAQvD,GLqlBxB,GAAI4B,GAAQzC,IAEZqB,GAAgBrB,KKhmBD4D,EAUjB,IAAM0D,GAAQtH,KAAKsH,MAAMD,GACnBE,EAAO,WACX9E,EAAK8E,KAAKnD,EAAO4C,OAAQK,EAAQC,EAAOzG,IAEpC2G,EAAQ,WACZ/E,EAAK+E,MAAMH,EAAQC,GACnBC,IAGFC,MACA,EAAAhH,EAAA,YAAEyG,QAAQ/D,GAAG,SAAU,WLylBnB,MKzlByBsE,OAC7BpD,EAAOgB,KAAK,SAAU,WL2lBlB,MK3lBwBmC,OL4qB5B,MApEA9F,GK7nBiBmC,IL8nBfvB,IAAK,QACLmB,MK/lBC,SAAC6D,GACJ,GAAMI,GAAUJ,EAAOK,WAAW,MAC5BC,EAAmBV,OAAOU,kBAAoB,EAC9CC,EAAoBH,EAAQI,8BACRJ,EAAQK,2BACRL,EAAQM,0BACRN,EAAQO,yBACRP,EAAQQ,wBAA0B,CAE5D,OAAON,GAAmBC,KLsmBxBvF,IAAK,QACLmB,MK7lBC,SAAC6D,EAAQC,GACZ,GAAMY,GAAMb,EAAOK,WAAW,MACxB/C,GAAU,EAAAnE,EAAA,YAAE6G,EAElB,IAAc,IAAVC,EAAa,CACf,GAAM5B,GAAQf,EAAQe,QAChByC,EAASxD,EAAQwD,QAEvBd,GAAO3B,MAAQA,EAAQ4B,EACvBD,EAAOc,OAASA,EAASb,EAEzBY,EAAIV,MAAMF,EAAOA,OL2mBjBjF,IAAK,OACLmB,MK/lBA,SAACwD,EAAQK,EAAQC,EAAOzG,GAC1B,GAAMqH,GAAMb,EAAOK,WAAW,MACxBU,EAAIf,EAAO3B,MACX2C,EAAIhB,EAAOc,OACXG,EAAIhB,CAEVzG,GAAUA,MAEVqH,EAAIK,UAAY1H,EAAQ4E,OAAOC,MAC/BwC,EAAIM,YAAc3H,EAAQ4E,OAAOE,MAEjCuC,EAAIO,UAAU,EAAG,EAAGL,EAAGC,GACvBH,EAAIQ,WAEJ,KAAK,GAAI7G,GAAI,EAAG8G,EAAI3B,EAAOlF,OAAY6G,EAAJ9G,EAAOA,IACxCqG,EAAIU,OAAO/G,GAAKuG,EAAIO,GAAIN,GAAK,EAAIC,GAAKtB,EAAOnF,IAAMwG,GAAK,EAAIC,IAG9DJ,GAAIzC,SACJyC,EAAIW,gBA9FajF,ILosBnBxC,GAAO3B,QKpsBYmE,ILssBrB,SAAWvE,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,0BAA2B,UAAW,SAAU,SAAU,oBAAqBD,OACjF,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,UAAWA,QAAQ,yBAC/C,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOO,EAAGP,EAAOwG,SAC3CxG,EAAOyJ,qBAAuBnJ,EAAIF,UAEnCO,KAAM,SAAUP,EAAS2B,EAAQnB,EAAS8I,GAC3C,YAMA,SAAS3I,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASwH,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAI1H,WAAU,iEAAoE0H,GAAeD,GAASzG,UAAYL,OAAOgH,OAAOD,GAAcA,EAAW1G,WAAa4G,aAAe5F,MAAOyF,EAAUjH,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAeiH,IAAY/G,OAAOkH,eAAiBlH,OAAOkH,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GARje,GAAIzH,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAE7hBgI,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKC,IAAS,EAAsB,OAAXC,IAAiBA,EAASG,SAASvH,UAAW,IAAIwH,GAAO7H,OAAO8H,yBAAyBL,EAAQC,EAAW,IAAa5I,SAAT+I,EAAJ,CAA4O,GAAI,SAAWA,GAAQ,MAAOA,GAAKxG,KAAgB,IAAI0G,GAASF,EAAKzG,GAAK,IAAetC,SAAXiJ,EAAwB,MAAoB,OAAOA,GAAOC,KAAKL,GAA/V,GAAIpF,GAASvC,OAAOiI,eAAeR,EAAS,IAAe,OAAXlF,EAAmB,MAA2B8E,GAAK9E,EAAQ+E,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,EAAMK,EAAOtF,EAASzD,SAQxcT,EAAKJ,EAAuBH,GAE5BoK,EAAYjK,EAAuB2I,GMhuBpBvC,EAAK,SAAA8D,GAoFb,QApFQ9D,GAoFPO,GNwvBR,GAAItE,GAAQzC,IAEZqB,GAAgBrB,KM90BDwG,GAqFjB+C,EAAApH,OAAAiI,eArFiB5D,EAAKhE,WAAA,cAAAxC,MAAAmK,KAAAnK,MAuFtBA,KAAK+G,OAASA,CAEd,IAAMwD,GAAOvK,KAAK+G,OAAOyD,MAAO,EAAAhK,EAAA,YAAER,KAAK+G,QAAQhE,KAC7C,wDACA,GAAGyH,GAELxK,MAAKyK,SACLzK,KAAK0K,SACL1K,KAAKgH,OAAS,GAAI2D,cAAa3K,KAAK4K,YAEpCpE,EAAMqE,iBAAiB,WACrBpI,EAAK0B,MAAQqC,EAAMsE,aAAaC,aAC9BC,IAAKT,EACLnG,QAAQ,EACR6G,UAAU,EACVC,aAAc,WN0vBV,MM1vBgBzI,GAAK0I,UACzBC,aAAc,WACZ3I,EAAKsD,SAAWtD,EAAK4I,YAAc5I,EAAK6I,YAE1CC,OAAQ,WACN9I,EAAKqD,QAAS,EACdrD,EAAKsD,SAAW,EAChBtD,EAAKwD,QAAQ,WAEfuF,OAAQ,WN4vBJ,MM5vBU/I,GAAKwC,QACnBwG,SAAU,WN8vBN,MM9vBYhJ,GAAKwC,QACrByG,QAAS,WNgwBL,MMhwBWjJ,GAAK4C,SACpBsG,SAAU,WNkwBN,MMlwBYlJ,GAAK4C,aNmyBzB,MA5KA2D,GMzuBiBxC,EAAK8D,GN2uBtB7I,EM3uBiB+E,IN4uBfnE,IAAK,aAOLkB,IMjrBU,WACZ,MAAO,SN0rBLlB,IAAK,aACLkB,IMnrBU,WACZ,MAAO,YN4rBLlB,IAAK,mBAOLmB,MM7vBmB,SAACoI,GACtB3E,OAAO4E,WAAY,EAEnBrL,EAAA,WAAEsL,MACAC,SAAU,SACVC,OAAO,EACPhB,IAAKxE,EAAMyF,iBAAiBC,GAC5BC,QAAS,WACPzM,SAAS,gBAAiB,SAAA0M,GN8vBpB,GM7vBGC,GAAgBD,EAAhBC,YAEF7F,GAAMsE,eACTtE,EAAMsE,aAAe,GAAIuB,GAEzB7L,EAAA,WAAEkC,QAAO,EAAM8D,EAAMsE,cACnBwB,aAAc,EACdC,eACEC,iBAAiB,GAEnBC,aAAa,EACbC,eAAe,EACfF,iBAAiB,EACjBG,oBAAoB,EACpBC,gBAAgB,EAChBC,WAAW,EACXC,WAAW,EACXC,YAAY,EACZ/B,IAAKxE,EAAMyF,iBAAiBe,MAG9BxG,EAAMsE,aAAamC,oBAKrBhG,OAAO6D,aAAetE,EAAMsE,aAE5BtE,EAAMsE,aAAaoC,QAAQ,WN8vBrB,MM9vB2BtB,eNqwBrCvJ,IAAK,mBAOLkB,IM7zBuB,WACzB,OACE2I,GAAI,sDACJc,IAAK,4DNq3BPvL,EM93BiB+E,IN+3BfnE,IAAK,SACLmB,MMtwBE,WACJ,GAAKxD,KAAK8F,QAAW9F,KAAKsF,QAA1B,CAIAtF,KAAKyK,MAAQzK,KAAKmE,MAAMgJ,aAAaC,KACrCpN,KAAK0K,MAAQ1K,KAAKmE,MAAMgJ,aAAaE,KAIrC,KAAK,GAFDC,GAAGrM,OAEEY,EAAI,EAAG0L,EAAIvN,KAAKwN,OAAO1L,OAAYyL,EAAJ1L,EAAOA,IAC7CyL,EAAMG,WAAWzN,KAAKyK,MAAM5I,IAAM4L,WAAWzN,KAAK0K,MAAM7I,IAExD7B,KAAKgH,OAAO,EAAInF,GAAKyL,EAAM,EAC3BtN,KAAKgH,OAAW,EAAJnF,EAAQ,GAAKyL,EAAM,CAGjC/D,GAAApH,OAAAiI,eA3IiB5D,EAAKhE,WAAA,SAAAxC,MAAAmK,KAAAnK,WAALwG,GNs5BhB6D,EAAU,WAEbjJ,GAAO3B,QMx5BY+G,IN05BrB,SAAWnH,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,8BAA+B,UAAW,SAAU,oBAAqBD,OAC3E,IAAuB,mBAAZG,UAA6C,mBAAX2B,QAClD9B,EAAQG,QAAS2B,OAAQ1B,QAAQ,yBAC5B,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,EAAKN,EAAOwG,SACjCxG,EAAOqO,wBAA0B/N,EAAIF,UAEtCO,KAAM,SAAUP,EAAS2B,EAAQ2H,GAClC,YAMA,SAAS3I,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASwH,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAI1H,WAAU,iEAAoE0H,GAAeD,GAASzG,UAAYL,OAAOgH,OAAOD,GAAcA,EAAW1G,WAAa4G,aAAe5F,MAAOyF,EAAUjH,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAeiH,IAAY/G,OAAOkH,eAAiBlH,OAAOkH,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GARje,GAAIzH,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAE7hBgI,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKC,IAAS,EAAsB,OAAXC,IAAiBA,EAASG,SAASvH,UAAW,IAAIwH,GAAO7H,OAAO8H,yBAAyBL,EAAQC,EAAW,IAAa5I,SAAT+I,EAAJ,CAA4O,GAAI,SAAWA,GAAQ,MAAOA,GAAKxG,KAAgB,IAAI0G,GAASF,EAAKzG,GAAK,IAAetC,SAAXiJ,EAAwB,MAAoB,OAAOA,GAAOC,KAAKL,GAA/V,GAAIpF,GAASvC,OAAOiI,eAAeR,EAAS,IAAe,OAAXlF,EAAmB,MAA2B8E,GAAK9E,EAAQ+E,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,EAAMK,EAAOtF,EAASzD,SAQxcoJ,EAAYjK,EAAuB2I,GOp7BpBtC,EAAQ,SAAA6D,GAehB,QAfQ7D,GAePM,GPo8BR,GAAItE,GAAQzC,IAEZqB,GAAgBrB,KOr9BDyG,GAgBjB8C,EAAApH,OAAAiI,eAhBiB3D,EAAQjE,WAAA,cAAAxC,MAAAmK,KAAAnK,KPy9BvB,IOv8BKkH,GAAgBD,OAAhBC,YAEPlH,MAAKyH,QAAU,GAAIP,GACnBlH,KAAKmE,MAAQ4C,EAER/G,KAAKyH,QAAQkG,wBAChB3N,KAAKyH,QAAQkG,sBAAwB3N,KAAKyH,QAAQmG,sBAGpD5N,KAAK6N,UAAY7N,KAAKyH,QAAQkG,sBAC5B3N,KAAK4K,WAAa,EAAG,EAAG,GAG1B5K,KAAK6N,UAAUC,eAAiB,SAAAC,GPs8B5B,MOt8BiCtL,GAAK0I,OAAO4C,IAE5C/N,KAAKyH,QAAQuG,aAChBhO,KAAKyH,QAAQuG,WAAahO,KAAKyH,QAAQwG,gBAGzCjO,KAAKkO,KAAOlO,KAAKyH,QAAQuG,aACzBhO,KAAKgH,OAAS,GAAI2D,cAAa3K,KAAK4K,WAAa,GAE7C5K,KAAKmE,MAAMgK,WAAa,EAC1BnO,KAAKmE,MAAMiK,UAAY,WPw8BnB,MOx8ByB3L,GAAK4L,WAElCrO,KAAKqO,UAGPrO,KAAKmE,MAAMmK,WAAa,SAAAP,GACtB,GAAMpM,GAASoM,EAAEQ,aAEb5M,GAAO6M,WACT/L,EAAKsD,SAAWpE,EAAO8M,SAASC,IAAI,GAAK/M,EAAO6M,WAIpDxO,KAAKmE,MAAMwK,UAAY,WP08BnB,MO18ByBlM,GAAKwC,QAClCjF,KAAKmE,MAAMuH,QAAU,WP48BjB,MO58BuBjJ,GAAK4C,SP2gChC,MArIA2D,GO77BiBvC,EAAQ6D,GP+7BzB7I,EO/7BiBgF,IPg8BfpE,IAAK,aAOLkB,IOj8BU,WACZ,MAAO,UPsgCP9B,EO7gCiBgF,IP8gCfpE,IAAK,SACLmB,MOh9BE,SAACuK,GPi9BD,GAAIa,GAAS5O,IOh9BjB,IAAKA,KAAK8F,QAAW9F,KAAKsF,QAA1B,CAQA,IAAK,GAJCuJ,MACAC,EAAWf,EAAEgB,YAAYC,iBACzBC,EAAajP,KAAK4K,WAAakE,EAE5BjN,EAAIiN,EAAW,EAAGjN,GAAK,EAAGA,IACjCgN,EAAQzI,KAAK2H,EAAEgB,YAAYG,eAAerN,GAG5C,KAAK,GPk9BGsN,GAAQ,SOl9BPtN,GACHiN,EAAW,EACbF,EAAK5H,OAAOnF,GAAKgN,EAAQO,OAAO,SAACC,EAAMC,GPm9BjC,MOn9B0CD,GAAKxN,GAAKyN,EAAKzN,KAAMiN,EAErEF,EAAK5H,OAAOnF,GAAKgN,EAAQ,GAAGhN,IAJvBA,EAAI,EAAOoN,EAAJpN,EAAgBA,IP69B1BsN,EO79BGtN,EAQT0H,GAAApH,OAAAiI,eApFiB3D,EAAQjE,WAAA,SAAAxC,MAAAmK,KAAAnK,UPmjCvBqC,IAAK,UACLmB,MO19BG,WACLxD,KAAK+G,OAAS/G,KAAKyH,QAAQ8H,yBAAyBvP,KAAKmE,OACzDnE,KAAK+G,OAAOsH,QAAQrO,KAAK6N,WACzB7N,KAAK+G,OAAOsH,QAAQrO,KAAKkO,MAEzBlO,KAAKkO,KAAKG,QAAQrO,KAAKyH,QAAQ+H,aAC/BxP,KAAK6N,UAAUQ,QAAQrO,KAAKyH,QAAQ+H,aAEpCxP,KAAK8F,QAAS,EACd9F,KAAK+F,SAAW,EAChB/F,KAAKiG,QAAQ,cApGIQ,GPmkChB4D,EAAU,WAEbjJ,GAAO3B,QOrkCYgH","file":"modem.js","sourcesContent":["import $ from 'jquery';\nimport Streamer from 'streamer';\nimport SlideIn from 'slide-in';\n\n// Expose the Streamer as a jQuery plugin.\n$.fn.streamer = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, 'streamer') === undefined) {\n      $.data(element, 'streamer', new Streamer(element, options));\n    }\n  });\n};\n\n$('[data-streamer]').streamer();\n\n$.fn.slideIn = function (options) {\n  return this.each((index, element) => {\n    if ($.data(element, 'slide-in') === undefined) {\n      $.data(element, 'slide-in', new SlideIn(element, options));\n    }\n  });\n};\n\n$('[data-slide-in]').slideIn();\n","import $ from 'jquery';\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class SlideIn {\n  /**\n   * Default Slide In options.\n   *\n   * @type {Object}\n   */\n  get defaults() {\n    return {\n      classes: {\n        open: 'is-open'\n      }\n    };\n  }\n\n  /**\n   * Initialize a Slide In.\n   *\n   * @param {Object} element The element to attach the Slide In to.\n   * @param {Object} options Custom configuration options.\n   */\n  constructor(element, options) {\n    this.options = $.extend(this.defaults, options);\n\n    this.$element = $(element);\n\n    const classes = this.options.classes;\n    const $close = this.$element.find('[data-slide-in-close]');\n    const $toggle = $(`[data-slide-in-toggle=${this.$element.attr('id')}]`);\n\n    $toggle.on('click', () => {\n      if (this.$element.hasClass(classes.open)) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    });\n\n    $close.on('click', () => {\n      if (this.$element.hasClass(classes.open)) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    });\n  }\n\n  /**\n   * Show the Slide In.\n   */\n  show() {\n    this.$element.addClass(this.options.classes.open);\n  }\n\n  /**\n   * Hide the Slide In.\n   */\n  hide() {\n    this.$element.removeClass(this.options.classes.open);\n  }\n}\n","import $ from 'jquery';\nimport Stream from 'streamer/stream';\nimport Waveform from 'streamer/waveform';\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Streamer {\n  /**\n   * Default Streamer options.\n   *\n   * @type {Object}\n   */\n  get defaults() {\n    return {\n      stroke: {\n        width: 2,\n        color: '#666'\n      },\n      classes: {\n        wrapper: 'streamer',\n        button: 'streamer-button',\n        icon: 'streamer-icon'\n      },\n      icons: {\n        play: 'ion-play',\n        pause: 'ion-pause'\n      },\n      labels: {\n        play: 'Continue playing',\n        pause: 'Stop playing'\n      }\n    };\n  }\n\n  /**\n   * Initialize a Streamer.\n   *\n   * @param {Audio}   element The <audio> element to attach the Streamer to.\n   * @param {Object}  options Custom configuration options.\n   */\n  constructor(element, options) {\n    this.options = $.extend(this.defaults, options);\n\n    const classes = this.options.classes;\n    const icons = this.options.icons;\n    const labels = this.options.labels;\n\n    this.audio = element;\n    this.stream = new Stream(this.audio);\n    this.$audio = $(this.audio);\n\n    this.$audio.wrap($('<div />', {\n      class: classes.wrapper\n    }));\n\n    this.$wrapper = this.$audio.parent();\n    this.$canvas = $('<canvas />');\n    this.$wrapper.append(this.$canvas);\n\n    this.$button = $('<button />', {\n      'class': classes.button,\n      'type': 'button',\n      'aria-label': labels.play\n    });\n    this.$wrapper.append(this.$button);\n\n    this.$icon = $('<span />', {\n      class: `${classes.icon} ${classes.icon}-play ${icons.play}`\n    });\n    this.$button.append(this.$icon);\n\n    this.stream.bind('play', () => {\n      this.$button.attr('aria-label', labels.pause);\n      this.$icon.removeClass(`${classes.icon}-play ${icons.play}`);\n      this.$icon.addClass(`${classes.icon}-pause ${icons.pause}`);\n      this.$wrapper.addClass('is-playing');\n    });\n\n    this.stream.bind('pause', () => {\n      this.$button.attr('aria-label', labels.play);\n      this.$icon.removeClass(`${classes.icon}-pause ${icons.pause}`);\n      this.$icon.addClass(`${classes.icon}-play ${icons.play}`);\n      this.$wrapper.removeClass('is-playing');\n    });\n\n    this.$button.on('click', () => {\n      if (this.stream.playing) {\n        this.stream.pause();\n      } else {\n        this.stream.play();\n      }\n    });\n\n    if (element.autoplay) {\n      this.stream.play();\n    }\n\n    this.waveform = new Waveform(this.$canvas[0], this.stream, {\n      stroke: this.options.stroke\n    });\n  }\n}\n","/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Adapter {\n  /**\n   * Initialize an audio adapter.\n   *\n   * @constructor\n   */\n  constructor() {\n    this.loaded = false;\n    this.progress = 0;\n    this.events = {};\n  }\n\n  /**\n   * Start playing the audio.\n   */\n  play() {\n    if (this.playing || !this.audio) {\n      return;\n    }\n\n    this.playing = true;\n    this.trigger('play');\n    this.audio.play();\n  }\n\n  /**\n   * Pause the audio.\n   */\n  pause() {\n    if (!this.playing || !this.audio) {\n      return;\n    }\n\n    this.playing = false;\n    this.trigger('pause');\n    this.audio.pause();\n  }\n\n  /**\n   * Trigger an update of the audio.\n   */\n  update() {\n    this.trigger('update');\n  }\n\n  /**\n   * Bind a callback to an event of the audio.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind(event, callback) {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n\n    this.events[event].push(callback);\n\n    return this;\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind(event) {\n    if (this.events[event]) {\n      Reflect.deleteProperty(this.events[event]);\n    }\n\n    return this;\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger(event) {\n    if (this.events[event]) {\n      this.events[event].forEach(callback => callback());\n    }\n\n    return this;\n  }\n}\n","import Flash from 'streamer/adapter/flash';\nimport WebAudio from 'streamer/adapter/web-audio';\n\n/**\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Stream {\n  /**\n   * Detect support for different APIs and return the appropriate audio\n   * adapter.\n   *\n   * This enables easy access to the different adapters:\n   *\n   *   new Streamer.Adapter(source)\n   *\n   * @return {Adapter} The Adapter constructor for the supported API.\n   */\n  static get Adapter() {\n    if (window.AudioContext) {\n      return WebAudio;\n    }\n\n    return Flash;\n  }\n\n  /**\n   * Get the audio signal.\n   *\n   * @type {Array}\n   */\n  get signal() {\n    return this.audio.signal;\n  }\n\n  /**\n   * Is the stream playing?\n   *\n   * @type {Boolean}\n   */\n  get playing() {\n    return this.audio.playing;\n  }\n\n  /**\n   * Initialize a stream.\n   *\n   * @param {Object} source The <audio> source element.\n   * @constructor\n   */\n  constructor(source) {\n    this.audio = new Stream.Adapter(source);\n  }\n\n  /**\n   * Start playing the stream.\n   */\n  play() {\n    this.audio.play();\n  }\n\n  /**\n   * Pause the stream.\n   */\n  pause() {\n    this.audio.pause();\n  }\n\n  /**\n   * Bind a callback to an event of the stream.\n   *\n   * @param {String}    event     The name of the event to bind to.\n   * @param {Function}  callback  The callback to bind.\n   */\n  bind(event, callback) {\n    this.audio.bind(event, callback);\n  }\n\n  /**\n   * Unbind an event bound to the specified name.\n   *\n   * @param {String} event The name of the event to unbind.\n   */\n  unbind(event) {\n    this.audio.unbind(event);\n  }\n\n  /**\n   * The the specified event.\n   *\n   * @param {String} event The event to trigger.\n   */\n  trigger(event) {\n    this.audio.trigger(event);\n  }\n}\n","import $ from 'jquery';\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Waveform {\n  /**\n   * Initialize a waveform.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the waveform.\n   * @param {Stream}            stream  The stream to use for constructing the waveform.\n   * @param {Object}            options Configuration options.\n   * @constructor\n   */\n  constructor(canvas, stream, options) {\n    const ratio = this.ratio(canvas);\n    const draw = () => {\n      this.draw(stream.signal, canvas, ratio, options);\n    };\n    const scale = () => {\n      this.scale(canvas, ratio);\n      draw();\n    };\n\n    scale();\n    $(window).on('resize', () => scale());\n    stream.bind('update', () => draw());\n  }\n\n  /**\n   * Get the ratio between the device pixel ratio and the backing store pixel\n   * ratio of the canvas being drawn on.\n   *\n   * @param   {HTMLCanvasElement} canvas  The canvas for which to calculate the\n   *                                      pixel ratio.\n   * @return  {Number}                    The canvas pixel ratio.\n   */\n  ratio(canvas) {\n    const context = canvas.getContext('2d');\n    const devicePixelRatio = window.devicePixelRatio || 1;\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                              context.mozBackingStorePixelRatio ||\n                              context.msBackingStorePixelRatio ||\n                              context.oBackingStorePixelRatio ||\n                              context.backingStorePixelRatio || 1;\n\n    return devicePixelRatio / backingStoreRatio;\n  }\n\n  /**\n   * Scale the canvas according to a specified ratio.\n   *\n   * @param {HTMLCanvasElement} canvas  The canvas to scale.\n   * @param {Number}            ratio   The ratio with which to scale the\n   *                                    canvas.\n   */\n  scale(canvas, ratio) {\n    const ctx = canvas.getContext('2d');\n    const $canvas = $(canvas);\n\n    if (ratio !== 1) {\n      const width = $canvas.width();\n      const height = $canvas.height();\n\n      canvas.width = width * ratio;\n      canvas.height = height * ratio;\n\n      ctx.scale(ratio, ratio);\n    }\n  }\n\n  /**\n   * Draw the waveform on the canvas.\n   *\n   * @param {Array}             signal  The waveform signal to draw.\n   * @param {HTMLCanvasElement} canvas  The canvas on which to draw the\n   *                                    waveform.\n   * @param {Number}            ratio   The pixel ratio to draw at.\n   * @param {Object}            options Configuration options.\n   */\n  draw(signal, canvas, ratio, options) {\n    const ctx = canvas.getContext('2d');\n    const w = canvas.width;\n    const h = canvas.height;\n    const r = ratio;\n\n    options = options || {};\n\n    ctx.lineWidth = options.stroke.width;\n    ctx.strokeStyle = options.stroke.color;\n\n    ctx.clearRect(0, 0, w, h);\n    ctx.beginPath();\n\n    for (let i = 0, l = signal.length; i < l; i++) {\n      ctx.lineTo(i * (w / l), h / (2 * r) + signal[i] * (h / (2 * r)));\n    }\n\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n","import $ from 'jquery';\nimport Adapter from 'streamer/adapter';\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class Flash extends Adapter {\n  /**\n   * The paths to the Sound Manager libraries.\n   *\n   * @type {Object}\n   */\n  static get soundManagerPath() {\n    return {\n      js: 'https://patterns.radiomodem.dk/lib/soundmanager2.js',\n      swf: 'https://patterns.radiomodem.dk/lib/soundmanager2.swf'\n    };\n  }\n\n  /**\n   * Load the Sound Manager libraries.\n   *\n   * @param {Function} done The callback to invoke once the loading has finished.\n   */\n  static loadSoundManager(done) {\n    window.SM2_DEFER = true;\n\n    $.ajax({\n      dataType: 'script',\n      cache: true,\n      url: Flash.soundManagerPath.js,\n      success: () => {\n        require(['SoundManager'], lib => {\n          const {SoundManager} = lib;\n\n          if (!Flash.soundManager) {\n            Flash.soundManager = new SoundManager();\n\n            $.extend(true, Flash.soundManager, {\n              flashVersion: 9,\n              flash9Options: {\n                useWaveformData: true\n              },\n              preferFlash: true,\n              useHTML5Audio: false,\n              useWaveformData: true,\n              useHighPerformance: true,\n              useFastPolling: true,\n              multiShot: false,\n              debugMode: false,\n              debugFlash: false,\n              url: Flash.soundManagerPath.swf\n            });\n\n            Flash.soundManager.beginDelayedInit();\n          }\n\n          // Expose the Sound Manager instance globally so that Flash can attach\n          // to it.\n          window.soundManager = Flash.soundManager;\n\n          Flash.soundManager.onready(() => done());\n        });\n      }\n    });\n  }\n\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize() {\n    return 1024;\n  }\n\n  /**\n   * Audio sample rate.\n   *\n   * @type {Number}\n   */\n  get sampleRate() {\n    return 44100;\n  }\n\n  /**\n   * Initialize a flash adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor(source) {\n    super();\n\n    this.source = source;\n\n    const path = this.source.src || $(this.source).find(\n      'source[src$=mp3], source[src$=mp4], source[src$=m4a]'\n    )[0].src;\n\n    this.waveL = [];\n    this.waveR = [];\n    this.signal = new Float32Array(this.sampleSize);\n\n    Flash.loadSoundManager(() => {\n      this.audio = Flash.soundManager.createSound({\n        url: path,\n        stream: true,\n        autoLoad: true,\n        whileplaying: () => this.update(),\n        whileloading: () => {\n          this.progress = this.bytesLoaded / this.bytesTotal;\n        },\n        onload: () => {\n          this.loaded = true;\n          this.progress = 1;\n          this.trigger('loaded');\n        },\n        onplay: () => this.play(),\n        onresume: () => this.play(),\n        onpause: () => this.pause(),\n        onfinish: () => this.pause()\n      });\n    });\n  }\n\n  /**\n   * Executed when audio is processed by Sound Manager.\n   */\n  update() {\n    if (!this.loaded && !this.playing) {\n      return;\n    }\n\n    this.waveL = this.audio.waveformData.left;\n    this.waveR = this.audio.waveformData.right;\n\n    let avg;\n\n    for (let i = 0, j = this.wave_L.length; i < j; i++) {\n      avg = parseFloat(this.waveL[i]) + parseFloat(this.waveR[i]);\n\n      this.signal[2 * i] = avg / 2;\n      this.signal[i * 2 + 1] = avg / 2;\n    }\n\n    super.update();\n  }\n}\n","import Adapter from 'streamer/adapter';\n\n/**\n * Based on Dancer.js (https://github.com/jsantell/dancer.js).\n *\n * @author Kasper Kronborg Isager <kasperisager@gmail.com>\n */\nexport default class WebAudio extends Adapter {\n  /**\n   * Audio sample size.\n   *\n   * @type {Number}\n   */\n  get sampleSize() {\n    return 2048;\n  }\n\n  /**\n   * Initialize Web Audio adapter.\n   *\n   * @param {Object} source The <audio> source element.\n   */\n  constructor(source) {\n    super();\n\n    const {AudioContext} = window;\n\n    this.context = new AudioContext();\n    this.audio = source;\n\n    if (!this.context.createScriptProcessor) {\n      this.context.createScriptProcessor = this.context.createJavascriptNode;\n    }\n\n    this.processor = this.context.createScriptProcessor(\n      this.sampleSize / 2, 1, 1\n    );\n\n    this.processor.onaudioprocess = e => this.update(e);\n\n    if (!this.context.createGain) {\n      this.context.createGain = this.context.createGainNode;\n    }\n\n    this.gain = this.context.createGain();\n    this.signal = new Float32Array(this.sampleSize / 2);\n\n    if (this.audio.readyState < 3) {\n      this.audio.oncanplay = () => this.connect();\n    } else {\n      this.connect();\n    }\n\n    this.audio.onprogress = e => {\n      const target = e.currentTarget;\n\n      if (target.duration) {\n        this.progress = target.seekable.end(0) / target.duration;\n      }\n    };\n\n    this.audio.onplaying = () => this.play();\n    this.audio.onpause = () => this.pause();\n  }\n\n  /**\n   * Executed when audio is processed by the script processor.\n   *\n   * @param {Object} e The audio processing event.\n   */\n  update(e) {\n    if (!this.loaded || !this.playing) {\n      return;\n    }\n\n    const buffers = [];\n    const channels = e.inputBuffer.numberOfChannels;\n    const resolution = this.sampleSize / channels;\n\n    for (let i = channels - 1; i >= 0; i--) {\n      buffers.push(e.inputBuffer.getChannelData(i));\n    }\n\n    for (let i = 0; i < resolution; i++) {\n      if (channels > 1) {\n        this.signal[i] = buffers.reduce((prev, curr) => prev[i] + curr[i]) / channels;\n      } else {\n        this.signal[i] = buffers[0][i];\n      }\n    }\n\n    super.update();\n  }\n\n  /**\n   * Hook up the audio source with other nodes.\n   */\n  connect() {\n    this.source = this.context.createMediaElementSource(this.audio);\n    this.source.connect(this.processor);\n    this.source.connect(this.gain);\n\n    this.gain.connect(this.context.destination);\n    this.processor.connect(this.context.destination);\n\n    this.loaded = true;\n    this.progress = 1;\n    this.trigger('loaded');\n  }\n}\n"],"sourceRoot":"/src/js"}